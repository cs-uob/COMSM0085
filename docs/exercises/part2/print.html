<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Exercises</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="overview.html">Overview</a></li><li class="chapter-item expanded affix "><li class="part-title">Week 6: The Web</li><li class="chapter-item expanded "><a href="http/index.html"><strong aria-hidden="true">1.</strong> HTTP</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="http/setup.html"><strong aria-hidden="true">1.1.</strong> Setup</a></li><li class="chapter-item expanded "><a href="http/explore.html"><strong aria-hidden="true">1.2.</strong> Exploring HTTP</a></li><li class="chapter-item expanded "><a href="http/research.html"><strong aria-hidden="true">1.3.</strong> Online research</a></li><li class="chapter-item expanded "><a href="http/server.html"><strong aria-hidden="true">1.4.</strong> A server in Java</a></li></ol></li><li class="chapter-item expanded "><a href="html5/index.html"><strong aria-hidden="true">2.</strong> HTML5</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="html5/basic.html"><strong aria-hidden="true">2.1.</strong> Basic HTML5</a></li><li class="chapter-item expanded "><a href="html5/templates.html"><strong aria-hidden="true">2.2.</strong> Templates</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Week 7: CSS</li><li class="chapter-item expanded "><a href="css/index.html"><strong aria-hidden="true">3.</strong> CSS</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="css/text.html"><strong aria-hidden="true">3.1.</strong> Styling Text</a></li><li class="chapter-item expanded "><a href="css/framework.html"><strong aria-hidden="true">3.2.</strong> Frameworks</a></li></ol></li><li class="chapter-item expanded "><a href="cssgrid/index.html"><strong aria-hidden="true">4.</strong> CSS grids</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="cssgrid/intro.html"><strong aria-hidden="true">4.1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="cssgrid/curriculum.html"><strong aria-hidden="true">4.2.</strong> Curriculum exercise</a></li><li class="chapter-item expanded "><a href="cssgrid/trees.html"><strong aria-hidden="true">4.3.</strong> Trees exercise (responsive layout)</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Week 8: Javascript</li><li class="chapter-item expanded "><a href="js/index.html"><strong aria-hidden="true">5.</strong> JavaScript</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="js/single.html"><strong aria-hidden="true">5.1.</strong> A single-page app</a></li><li class="chapter-item expanded "><a href="js/static.html"><strong aria-hidden="true">5.2.</strong> Static structure</a></li><li class="chapter-item expanded "><a href="js/dynamic1.html"><strong aria-hidden="true">5.3.</strong> Dynamic structure, part 1</a></li><li class="chapter-item expanded "><a href="js/dynamic2.html"><strong aria-hidden="true">5.4.</strong> Dynamic structure, part 2</a></li><li class="chapter-item expanded "><a href="js/exercises.html"><strong aria-hidden="true">5.5.</strong> Further exercises</a></li></ol></li><li class="chapter-item expanded "><a href="react/index.html"><strong aria-hidden="true">6.</strong> React</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="react/installing.html"><strong aria-hidden="true">6.1.</strong> Installing React</a></li><li class="chapter-item expanded "><a href="react/hello.html"><strong aria-hidden="true">6.2.</strong> Hello World in React</a></li><li class="chapter-item expanded "><a href="react/character.html"><strong aria-hidden="true">6.3.</strong> Exercise</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Week 9: Web Scraping</li><li class="chapter-item expanded "><a href="scrape/index.html"><strong aria-hidden="true">7.</strong> Web scraping</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="scrape/crawl.html"><strong aria-hidden="true">7.1.</strong> Crawling</a></li><li class="chapter-item expanded "><a href="scrape/soup.html"><strong aria-hidden="true">7.2.</strong> BeautifulSoup</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Week 10: Practical Encryption</li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.</strong> Practical Encryption</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">8.1.</strong> OpenSSL</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.2.</strong> PGP</div></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Exercises</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="overview"><a class="header" href="#overview">Overview</a></h1>
<p>This page contains the exercises for Part 2 (the last 5 weeks) of COMSM0085 Software Tools.
As with Part 1, each week usually contains two workbooks -- sets of exercises which are supported
by videos to watch, or by set reading materials (more prominent in this part of
the unit). The exercises will require you to do some work within your Linux
VM in Vagrant, which we'll be supporting in the labs, but which you should
attempt before the lab to get the most out of the unit.</p>
<p>Part 2 focuses on web technologies. The Web is one of the largest software
ecosystems ever built, and a lot of programmers will either work on web
technologies or make use of them to present their other work. We'll be covering
the basics: how to write webpages, style them using CSS, make them interactive
using Javascript. Then we'll look at ways to treat websites and webpages as
parseable resources, and conclude by looking at the kinds of encryption needed
in common web transactions.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="http"><a class="header" href="#http">HTTP</a></h1>
<p>HTTP, or HyperText Transfer Protocol, is one of the basic protocols that make up the internet - and usually the lowest level that a web developer needs to concern themselves with frequently.</p>
<h2 id="videos"><a class="header" href="#videos">Videos</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Video</th><th style="text-align: right">Length</th><th>Slides</th></tr></thead><tbody>
<tr><td><a href="https://web.microsoftstream.com/video/99c10922-d2fa-4a82-8098-4f779ea026e8">HTTP</a></td><td style="text-align: right">26 minutes</td><td><a href="https://uob-my.sharepoint.com/:b:/g/personal/me17847_bristol_ac_uk/EaKDKCP6APNJj9c6PH35ZLUBz97c5mVLITbUBxiYm-UfSw?e=D4Zwao">slides</a></td></tr>
<tr><td><a href="https://web.microsoftstream.com/video/43097d0a-1064-42d0-8a3a-dd67bc78542c">The Internet</a></td><td style="text-align: right">15 minutes</td><td><a href="https://uob-my.sharepoint.com/:b:/g/personal/me17847_bristol_ac_uk/EW193TDO4qVHtgZONmbmNXYB1ypxNTN3DIOrlS2n7aEkPg?e=MuI7jC">slides</a></td></tr>
<tr><td><a href="https://web.microsoftstream.com/video/4ed9cab8-021d-41b1-bffb-4fdf5fa11fe4">URLs</a></td><td style="text-align: right">7 minutes</td><td><a href="https://uob-my.sharepoint.com/:b:/g/personal/me17847_bristol_ac_uk/EUY5-p9SDSJFnqDPlBRzUxwBuhV9uORYmF7ZLoOhgAySbA?e=LAaGZv">slides</a></td></tr>
</tbody></table>
</div>
<h2 id="reading"><a class="header" href="#reading">Reading</a></h2>
<ul>
<li><a href="https://www.rfc-editor.org/rfc/rfc7230">RFC 7230</a> - this is a comprehensive
outline of the protocol for HTTP, but you can focus on sections 2.1, 2.2, 2.7 and 3.</li>
</ul>
<h2 id="exercises"><a class="header" href="#exercises">Exercises</a></h2>
<ul>
<li><a href="http/./setup.html">Setup</a></li>
<li><a href="http/./explore.html">Exploring HTTP</a></li>
<li><a href="http/./research.html">Online research</a></li>
<li><a href="http/./server.html">A server in Java</a></li>
</ul>
<h2 id="optional"><a class="header" href="#optional">Optional</a></h2>
<p>You can read the RFC for the internet protocol IP at <a href="https://www.rfc-editor.org/rfc/rfc791.html">RFC 791</a>.</p>
<p>You can read the RFC for the transmission control protocol at <a href="https://www.rfc-editor.org/rfc/rfc793">RFC 793</a>.</p>
<p>You can read the RFC for URIs at <a href="https://www.rfc-editor.org/rfc/rfc3986">RFC 3986</a>.</p>
<p>If you want to, you can read further about HTTP (including the new HTTP/2 standard) on the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP">Mozilla Developer Network</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="set-up"><a class="header" href="#set-up">Set-up</a></h1>
<p>From this point on we will be running web servers on our development environment, and connecting to them with web browsers. To get this to work we need to set some things up first, so please follow the instructions for your environment:</p>
<h2 id="lab-machine-native"><a class="header" href="#lab-machine-native">Lab machine, native</a></h2>
<p>These instructions apply if you are working directly on a lab machine (not using a Vagrant VM).</p>
<p>You do not need to set up anything special. As you are not root, you can only serve from TCP ports 1024 or above, but that is not a problem - we will use port 8000 by default.</p>
<p>Proceed directly to <a href="http/explore.html">exploring HTTP</a>.</p>
<h2 id="lab-machine-with-vagrant"><a class="header" href="#lab-machine-with-vagrant">Lab machine, with Vagrant</a></h2>
<p>If you want to run a server inside a Vagrant VM and connect to it with a browser directly on the lab machine (outside the VM), then you will need to tell Vagrant which ports within the VM to make available outside the VM. Open your Vagrantfile and add the line</p>
<pre><code>config.vm.network "forwarded_port", guest: 8000, host: 8000
</code></pre>
<p>in the main block (just before the <code>config.vm.provision</code> line will do), then restart your VM if it is already running. This tells Vagrant to open a server on port 8000 on the host (the lab machine), and forward any traffic it receives to port 8000 on the VM.</p>
<p>You can now start the VM, run a server inside the VM, and connect to it from the browser on the lab machine.</p>
<p>Proceed to <a href="http/explore.html">exploring HTTP</a> and run the server (the <code>nc</code> command) inside the VM, but use the browser on the lab machine directly. Note that the <code>http-response</code> file mentioned on that page needs to go in the correct folder inside the VM, where you started the server.</p>
<h2 id="your-own-machine-without-vagrant"><a class="header" href="#your-own-machine-without-vagrant">Your own machine, without Vagrant</a></h2>
<p>If you have a system that supports the <code>nc</code> and <code>wget</code> commands (Mac OS, Linux or WSL should all offer the option to install them) then you can proceed directly to <a href="http/explore.html">exploring HTTP</a>.</p>
<p>You might get one or more firewall warning pop-ups, which you will have to "allow".</p>
<h2 id="your-own-machine-with-vagrant"><a class="header" href="#your-own-machine-with-vagrant">Your own machine, with Vagrant</a></h2>
<p>Configure vagrant as in the section "Lab machine, with Vagrant" above, that is add the line</p>
<pre><code>config.vm.network "forwarded_port", guest: 8000, host: 8000
</code></pre>
<p>to the Vagrantfile and restart Vagrant. You can now run servers in the VM and clients (such as your favourite browser) on your own machine.</p>
<p>You might get firewall warning pop-ups, which you will have to "allow".</p>
<p>Proceed to <a href="http/explore.html">exploring HTTP</a>. If you don't have <code>wget</code> on your own machine, you can open a second terminal and log in to the VM from there, then run both <code>wget</code> and the server inside the VM that way - then later on, when you're using a browser instead of <code>wget</code> for the client, you can just open the browser on your own machine.</p>
<h2 id="over-ssh"><a class="header" href="#over-ssh">Over SSH</a></h2>
<p>For security reasons, you will not be able to run a web server on a lab machine (whether in a VM or not) and connect to it from your local web browser. If you have no other option than to use a remote connection, you should use <a href="https://wiki.x2go.org/doku.php/download:start">x2go</a> to connect to a lab machine with a graphical user interface, and run both the server and browser through that. This software uses ssh internally so you need to connect to <code>rd-mvb-linuxlab.bristol.ac.uk</code> using <code>seis.bris.ac.uk</code> as the proxy server.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="exploring-http"><a class="header" href="#exploring-http">Exploring HTTP</a></h1>
<h2 id="before-you-start"><a class="header" href="#before-you-start">Before you start</a></h2>
<p>To avoid an annoying problem, before we run our own server we are going to check that no-one else is already using the TCP port we want.</p>
<p>Run the command</p>
<pre><code>wget localhost:8000
</code></pre>
<p>on the machine where you want to run the <em>server</em>. It should time out after a couple of seconds (or instantly) with "failed" and some error message.</p>
<p>If it succeeds (shows "Connected" or "200 OK" anywhere), then someone or something else is using port 8000.</p>
<p>Next, run</p>
<pre><code>netstat -tan
</code></pre>
<p>and check that there is no line with the value "8000" under Local Address and a state of LISTEN or ESTABLISHED. If you get a lot of lines, <code>netstat -tan | grep 8000</code> will help. It does not matter if 8000 appears in the Foreign Address column, but there must be no-one using port 8000 under Local Address.</p>
<p><code>netstat</code> should work on every OS including Windows (Microsoft has written their own version), but <code>wget</code> doesn't exist by default on Windows machines although it can be downloaded for free.</p>
<p>If either <code>wget</code> or <code>netstat</code> suggests port 8000 is in use,</p>
<ul>
<li>If you are on a lab machine, it could be that another student is using port 8000 (maybe they are logged in via SSH).</li>
<li>You might have other software (such as a web development package) already using that port.</li>
</ul>
<p>You can try port numbers 8001, 8002 etc until you get one that is definitely not being used and then replace 8000 with that in all further exercises today, or (on your own machine) you can stop whatever program is using the port first.</p>
<p>Note: if you have vagrant running and set up as described on the last page, and you run <code>wget localhost:8000</code> on your own machine (not the VM), then vagrant will be using port 8000 and <code>wget</code> might block waiting for a reply. This is the correct behaviour, and this is why I asked you to run <code>wget</code> on the machine where you want to run your <em>server</em>, not the <em>client</em>. If you want to do the following exercises with both server and client on your own machine, then you need to stop the vagrant VM first or remove the 8000 line from your vagrantfile.</p>
<h2 id="a-basic-http-server-and-client"><a class="header" href="#a-basic-http-server-and-client">A basic HTTP server and client</a></h2>
<p>Open a terminal on the machine where you want to run the server, and download the file <a href="http/../resources/http-response">http-response</a> to the folder where your terminal is open (for example with <code>wget</code>). Then run the command</p>
<pre><code>nc -l -p 8000 &lt; http-response
</code></pre>
<p>This calls the tool <code>nc</code> ("network cat") and tells it to listen on TCP port 8000 (<code>-l -p 8000</code>), e.g. to run a server there. When a client connects, <code>nc</code> will by default read from its standard input and write this to the client, so we use a shell redirect to make it read from a file instead. The file contains some standard HTTP:</p>
<pre><code>HTTP/1.1 200 OK
Content-type: text/plain
Content-length: 18
Connection: close

Hello over HTTP!
</code></pre>
<p>(If you want to type this out yourself or copy-paste, you <strong>must</strong> save the file with CRLF line endings and put two newlines after the hello message.)</p>
<p><code>nc</code> will block until you connect a client. Open another terminal on the machine you want to run your client and run</p>
<pre><code>wget -q -S -O - localhost:8000
</code></pre>
<p>You have now made a HTTP connection from the wget client to the nc server. The server terminal should print out the HTTP request it got from the client (this is built into wget) and the client should print out the response from the server (which comes from the file).</p>
<h2 id="connecting-with-a-web-browser"><a class="header" href="#connecting-with-a-web-browser">Connecting with a web browser</a></h2>
<p>Run <code>nc -l -p 8000 &lt; http-response</code> again on your server machine (kill the old one with <code>Control+C</code> first if it hasn't terminated already).</p>
<p>Open a web browser on your client machine (e.g. your own PC/laptop, or a lab machine). If you're using chrome/edge or firefox, open the debug tools (<code>F12</code>) and go to the network tab before you open the page.</p>
<p>Navigate to <code>localhost:8000</code>. You should see the line "Hello over HTTP!" and <code>nc</code> will print the HTTP request from your browser. You can then close it with <code>Control+C</code> if it doesn't terminate by itself. In your browser's debug tools, on the network tab you should see a file <code>localhost</code>, click this and then select <em>Headers</em> in the details that appear.</p>
<p>This details page shows you the HTTP request details, including the response code (<code>200 OK</code> in this case) and all the headers sent in both directions. This screen is one of the first places you should look at when something web-based that you've coded is not working correctly or at all, as HTTP is normally the lowest layer you need to care about.</p>
<p>In particular, the <code>Content-type</code> header is a common source of mistakes: if you want to serve e.g. a script or a stylesheet but you don't set the correct type header, your browser may download the file just fine but won't do anything with it. Similarly, whether you send <code>text/plain</code> or <code>text/html</code> determines whether the browser will interpret a file you navigate to as HTML or not.</p>
<h2 id="a-web-server-in-c"><a class="header" href="#a-web-server-in-c">A web server in C</a></h2>
<p>On your server machine, clone the repository <code>https://github.com/emikulic/darkhttpd</code> which contains a single-file web server in just under 3000 lines of C. You do not need to understand this code in detail, but it can be educational to try to understand some of what it does internally.</p>
<p>Compile the program either with <code>make</code> or simply <code>gcc darkhttpd.c -o darkhttpd</code>. The server's job is to serve files within a folder, so make a subfolder called <code>web</code> and then run it with <code>./darkhttpd web --port 8000</code>. You can stop it again at the end of the exercise with <code>Control+C</code>.</p>
<p>You can now experiment with the following:</p>
<ul>
<li>Create some files (plain text, HTML, image etc.) in <code>web/</code>.</li>
<li>Access them from your browser with <code>localhost:8000/FILENAME</code>, for example <code>web/hello.txt</code> would become <code>localhost:8000/hello.txt</code>.</li>
<li>Observe the HTTP headers in your browser's developer tools, and the server logs printed in the server terminal.</li>
</ul>
<p>This particular server is written so that if you try and access a folder instead of a file, for example just <code>localhost:8000</code> which has the implicit path <code>/</code> which maps to the <code>web</code> folder, then it shows a list of files in this folder as clickable links.</p>
<p>Pay particular attention to how the <code>Content-type</code> header is sent depending on the file extension. From the browser's point of view, that header is what counts: if you send a file with <code>.html</code> extension but set <code>Content-type: text/plain</code>, the browser would not interpret it as HTML. This makes it possible to serve URLs with no "extension" at all like <code>/students</code> for a database application, and still have the browser understand what to do.</p>
<p>From the server's point of view, this server (like most other servers that simply serve files from a folder) has chosen to use a file's extension to determine what <code>Content-type</code> to send; this is implemented in the <code>default_extension_map</code> starting at line 333 of the source file.</p>
<p>You can try this out for yourself if you want: make a HTML file called <code>one.html5</code> in the web directory and access it with the browser. (<code>.html5</code> is not an official extension, it's something I just made up. The correct one to use for proper websites is <code>.html</code>.) The server won't send a <code>Content-type</code> header at all, since it doesn't know this extension, so the browser will either display it as a plain text file or download the file instead of showing it.</p>
<p>Edit the map in the source file and change the entry for <code>text/html</code> to read <code>" html htm html5"</code>, keeping the space at the start of the string. Recompile the server.</p>
<p>Rename the file to <code>two.html5</code> (I'll explain why in a second) and restart the server and try and open the file in the browser. This time, the file will display as a HTML page.</p>
<p>Why did you have to rename the file? Because the browser will otherwise try and be clever if it thinks you're trying to access a file that you've just downloaded already. The server sends a <code>Last-modified</code> header, and if the browser notices you're asking for a file you have just downloaded, with the same timestamp as the HTTP header indicates, then your browser might ignore the rest of the request and not see that another header has changed. Changing the file name forces the browser to look again, as it thinks it's a different file now. Deleting the downloaded file, or editing the file on the server, would both have the same effect.</p>
<p>There is a moral here: if you're doing web development, and you are trying to find out why a change you made isn't showing in the browser (even if you refresh the page), it might be a cache problem. On the network tab of the developer tools window, there should be a checkbox to "disable cache" which you might want to turn on in this case and reload the page again, to exclude the cache as the possible source of the problem.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="httpurl-research-exercises"><a class="header" href="#httpurl-research-exercises">HTTP/URL research exercises</a></h1>
<p>Research online what the following are and what they do:</p>
<ul>
<li>The <em>fragment</em> part of a URL.</li>
<li>The <code>Accept</code> header sent by the HTTP client.</li>
<li>The <code>User-agent</code> header sent by the HTTP client. What does your browser send?</li>
<li>How do you encode a path that contains a space in an URL? Which other characters are "special" and need to be treated this way in paths?</li>
<li>Which web server is the University of Bristol using for <code>www.bristol.ac.uk</code>, according to the headers? Read up online on this server and the organisation of the same name that maintains it.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="a-server-in-java"><a class="header" href="#a-server-in-java">A server in Java</a></h1>
<p>From now on, we will be using the Java language and the Spring Boot framework to run real web servers, as you might do in a software engineering project.</p>
<h2 id="compile-and-run"><a class="header" href="#compile-and-run">Compile and run</a></h2>
<p>Make sure you have java and maven installed as we did earlier in the unit.
Clone the repository <code>git@github.com:cs-uob/COMSM0085</code> if you have not done so
already, and navigate to the folder <code>code/server01</code>. In this folder, run <code>mvn spring-boot:run</code> to compile and run the sample application. The first time you
do this, it might download lots of files.</p>
<p>This runs a web server on port 8000.</p>
<h2 id="explore-the-application"><a class="header" href="#explore-the-application">Explore the application</a></h2>
<p>The <code>pom.xml</code> file tells maven that this is a spring boot project, and what the project is called (<code>softwaretools.server01</code>).</p>
<p>Under <code>src/main/resources</code> you find two files. First, <code>application.properties</code> which is a spring file configured to run on port 8000 (the default would otherwise be 8080). Secondly, a HTML file that the application can serve.</p>
<p>Under <code>src/main/java</code> is the source code. This is only two files, but of course the whole spring framework is active when the application runs. <code>Server01Application</code> is the main class, but this just contains boilerplate code for now.</p>
<p><code>Controller.java</code> is the interesting one: in application development, <em>Model - View - Controller</em> is one of several patterns to structure an application, where a <em>Controller</em> is a piece of code that does the heavy lifting part, for example replying to a HTTP request.</p>
<p>Spring works with annotations, special classes whose name begins with an <code>@</code> sign. When the server starts, spring scans all files for annotations and sets up code to deal with them. Here we can see:</p>
<ul>
<li><code>@SpringBootApplication</code> (on the <code>Server01Application</code> class) tells spring that this is the main file to run.</li>
<li><code>@RestController</code> tells spring that this class contains methods to deal with HTTP requests. It is so named because spring has libraries to make implementing the REST principles particularly easy.</li>
<li><code>@AutoWired</code> on a field tells spring that this field is spring's responsibility to set up when the application starts. The <code>ResourceLoader</code> is part of spring and lets you access files in <code>src/main/resources</code>.</li>
<li><code>@GetMapping(PATH)</code> tells spring that this method should be called to reply to a HTTP GET request for the provided path (there is of course also a <code>@PostMapping</code> and so on).</li>
</ul>
<p>The <code>mainPage</code> method, which is called when you load <code>localhost:8000</code>, shows the basic way to reply to a HTTP request: set up any headers you need - in this case the content type - and return a <code>ResponseEntity</code> taking three parameters: the HTTP body of the response to return (this will be shown in your browser), the HTTP headers to set, and the response code which is 200 (OK) here.</p>
<p>The <code>htmlPage</code> method replies to requests for <code>localhost:8000/html</code>. Here we want to serve a file, so we use the resource loader to get it from the classpath which includes the <code>src/main/resources</code> folder (or rather, the version of it that ends up in the compiled JAR file). It also shows a second way to create a <code>ResponseEntity</code> using the <em>builder</em> pattern.</p>
<h2 id="exercises-1"><a class="header" href="#exercises-1">Exercises</a></h2>
<ul>
<li>Compile and run the application, and test both <code>localhost:8000</code> an <code>localhost:8000/html</code> in your browser. Observe both the headers in the developer tools, and the log messages that spring prints out for each request.</li>
<li>Add a method that replies to requests for <code>localhost:8000/bad</code> with a HTTP <code>404 NOT FOUND</code> error. The body of the page can be a simple string with a message of your choice. Stop and restart the application, and check that you get the correct error message when you try and open this page.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="html5"><a class="header" href="#html5">HTML5</a></h1>
<p>HTML5, officially introduced in 2014, is the modern markup language for writing websites.</p>
<p>It gets rid of a lot of historical annoyances and inconsistencies from previous versions of HTML and XML and contains a lot of new standard tags and attributes for features that individual sites had built with JavaScript or Adobe Flash in the past. For example, HTML5 has a <code>&lt;video&gt;</code> tag for a consistent way to include videos that work across different platforms and without plug-ins, and a standard way of writing a date picker or "calendar" widget.</p>
<h2 id="videos-1"><a class="header" href="#videos-1">Videos</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Video</th><th style="text-align: right">Length</th><th>Slides</th></tr></thead><tbody>
<tr><td><a href="https://web.microsoftstream.com/video/60b286e4-2a48-457c-b564-fec86ee2169d">HTML5</a></td><td style="text-align: right">16 minutes</td><td><a href="https://uob-my.sharepoint.com/:b:/g/personal/me17847_bristol_ac_uk/Ea3-DaFYa9RItnmSRhVGPXIBGAS_PHaWAKGgeuay7Zf1kg?e=0rxeGt">slides</a></td></tr>
<tr><td><a href="https://web.microsoftstream.com/video/eccbed8b-eca0-4d67-a4fe-ac9f440e422d">HTML elements</a></td><td style="text-align: right">9 minutes</td><td><a href="https://uob-my.sharepoint.com/:b:/g/personal/me17847_bristol_ac_uk/ERJbx2SsLUlDtuutM2Iort0BkVM4OmX4cfK1v79eixrtqA?e=CrgGEv">slides</a></td></tr>
</tbody></table>
</div>
<h2 id="mdn"><a class="header" href="#mdn">MDN</a></h2>
<p><em>For the web part of the unit, we will be reading some of the documentation on the Mozilla Developer Network (MDN) for some workshops, to complement the videos and exercises.</em></p>
<p>These pages are pitched at a lower level of technical expertise than CS students, so you should get through them very quickly. Many of them also contain interactive examples to try out. If your future career involves web development, you will be consulting documentation like the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML">MDN HTML reference guide</a> a lot - for example, to read through all the attributes you can put on a <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/form">form tag</a>.</p>
<p>Please read the following pages for this workshop, as well as watching the videos.</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/HTML/Introduction_to_HTML/Getting_started">MDN: Getting Started with HTML</a> The very basics, and the HTML5 page template.</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/HTML/Introduction_to_HTML/HTML_text_fundamentals">MDN: HTML Text Fundamentals</a> A recap of paragraphs, headings, styling, semantic tags.</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/HTML/Introduction_to_HTML/Creating_hyperlinks">MDN: Creating Hyperlinks</a> All about the <code>&lt;a&gt;</code> tag.</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/HTML/Introduction_to_HTML/Document_and_website_structure">MDN: Document and website structure</a> HTML5 semantic tags for structure.</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/Forms/HTML5_input_types">MDN: HTML5 input types</a> More on using the most appropriate controls in your forms.</li>
</ul>
<h2 id="exercises-2"><a class="header" href="#exercises-2">Exercises</a></h2>
<ul>
<li><a href="html5/./basic.html">Basic HTML5</a></li>
<li><a href="html5/./templates.html">Templates</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="basic-html5"><a class="header" href="#basic-html5">Basic HTML5</a></h1>
<p>For your first exercise, create a page called <code>index.html</code> and add the HTML5 template code to it.</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
 &lt;head&gt; 
   &lt;meta charset="utf-8" /&gt;
   &lt;title&gt;A web page&lt;/title&gt;
 &lt;/head&gt;
 &lt;body&gt;
    &lt;h1&gt;An example web-page&lt;/h1&gt;
    &lt;p&gt;A paragraph of text here, perhaps with &lt;a href='./another_page/'&gt;a link&lt;/a&gt;&lt;/p&gt;
 &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>The name <code>index.html</code> is a convention: most web servers, if you give an URL that looks like a "folder" e.g. <code>example.com/pages</code> (or <code>example.com/pages/</code> with slash on the end) will serve the file <code>index.html</code> from within that folder, if there is one.</p>
<h2 id="create-a-page"><a class="header" href="#create-a-page">Create a page</a></h2>
<p>Create content in your page to make it look like the following, then open it in your browser. All body text, but not the bullet list, is contained in paragraph tags.</p>
<div style="background:#fff; border: 1px solid #1d1b1e; box-shadow: 0px 0px 10px #333; width: 100%; height: 490px; border-radius: 5px;">
<div style="height:40px; background-color: #1d1b1e; display:flex; justify-content: start; align-items: center; padding: 0 1em; border-radius: 5px 5px 0 0;">
    <div style="display: flex; font-size: 1rem;">
        <div style="background: #c43e3e; border-radius: 100%; width: 1em; height: 1em; margin: 0 0.5em;"></div>
        <div style="background: #c1a347; border-radius: 100%; width: 1em; height: 1em; margin: 0 0.5em;"></div>
        <div style="background: #4b3cb5; border-radius: 100%; width: 1em; height: 1em; margin: 0 0.5em;"></div>
    </div>
    <div style="font-family: monospace; font-size: 0.8em; background: #eeeeee; color: #1d1b1e; padding: 0.2em 0.5em; border-radius: 5px; margin-left: 1em; margin-right: 5em; flex-grow: 1;">http://localhost:8000</div>
</div>
<iframe style="border: none; width: 100%; height: 450px" src="../resources/examplepage.html" title="example page">
</iframe>
</div>
<h2 id="validate-your-page"><a class="header" href="#validate-your-page">Validate your page</a></h2>
<p>There are various libraries and services that check if your page is valid HTML5.</p>
<p>At <a href="https://validator.w3.org/">validator.w3.org</a> you can enter an URL, upload a file, or paste the contents of a file and validate it. Check that the page you have just written is valid HTML5.</p>
<p>Your browser's developer tools can also check the page you are viewing. For Chrome/Edge, to to the <em>Console</em> tab and, if the button at the top does not read <em>No Issues</em> but shows a number with a blue (or even yellow or red) icon, then click it to open the <em>Issues</em> tab and see what the browser is complaining about.</p>
<p>You can check the sample solution <a href="html5/../resources/examplepage.html">here</a> but you might have a different, equally valid solution.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="templating"><a class="header" href="#templating">Templating</a></h1>
<p>The bread and butter of many developer jobs is building web applications that let people interact with data in a database. In a university for example, such an application might let students see the units they are enrolled in, their teaching and exam timetables, and their grades. Academics would be able to add new grades, and staff in the timetabling office would be able to create and edit timetables.</p>
<p>In such an application, pages need to be somewhat dynamic: the "student profile" page will show data for the particular student that you are looking at. Rather than generating these HTML pages "manually", for example by pasting strings together, it is much cleaner and usually more efficient to use a templating library. You could define one "student profile page" template, and then when a student requests their profile page, the server uses the template to create the page with this student's data. Creating a particular page from a template and some data is called <em>rendering</em> the page.</p>
<p>This workshop's example application is <code>code/server02</code> in the unit git repository. You build it with <code>mvn spring-boot:run</code> like the previous one, then access <code>localhost:8000</code>.</p>
<p>The application is a very minimal university database with students, units and grades. The <code>Database</code> interface in the <code>model</code> folder, together with the Student and Unit classes, form the data model - you can search for all students or all units in the database. In a real database of course, you would be able to search for an individual student by ID as well.</p>
<p>The file <code>Templates.java</code> sets up the <a href="https://www.thymeleaf.org/">thymeleaf</a> template engine. The <code>@Component</code> annotation tells spring to manage this class; other classes that need templates can request it by declaring a field of the right class with <code>@Autowired</code>, as you can see in <code>Controller.java</code>.</p>
<p>The main page is served up as before as a HTML file from the classpath in <code>src/main/resources/web</code>.</p>
<p>Have a look at the process when <code>/units</code> is requested.</p>
<ul>
<li>First, the method <code>unitsPage</code> accesses the database and loads the list of units.</li>
<li>Next, it creates a <code>Context</code>, a thymeleaf object that lets you pass values to a template. Here we add one value with key <code>units</code>, containing the list of units.</li>
<li>Finally, we render the template with the context and return this. If a method in a spring controller returns a string, then the string is assumed to contain a HTML page and spring correctly sets the HTTP status code and headers.</li>
</ul>
<p>The template itself is in <code>src/main/resources/units.html</code>. Anything with a <code>th:</code> prefix is rendered by thymeleaf:</p>
<pre><code class="language-html">&lt;ul th:each="unit : ${units}"&gt;
    &lt;li&gt;
        &lt;a th:href="'/unit/' + ${unit.code}" th:text="${unit.code}"&gt;&lt;/a&gt;
        &lt;span th:text="${unit.title}"&gt;&lt;/span&gt;
    &lt;/li&gt;
&lt;/ul&gt;
</code></pre>
<p>The <code>th:each</code> attribute is the equivalent of a for loop in Java, in this case <code>for (Unit unit : units)</code> - in thymeleaf, unlike plain Java, you do not need to give the loop variable a type but you do need to use the <code>${...}</code> syntax whenever you are accessing a variable from the context. The <code>th:each</code> attribute renders its own tag once (in this case <code>&lt;ul&gt;</code>) and then renders everything inside the tag once per pass through the loop, so you get one <code>&lt;li&gt;</code> item per unit.</p>
<p>To create an attribute, you put <code>th:</code> in front of the attribute name, so the <code>th:href</code> creates the <code>href</code> attribute of a link (check the result in your browser). Thymeleaf attribute syntax is that you need to put single quotes around strings, <code>+</code> like in Java to stick strings together, and <code>${...}</code> around variables.</p>
<p>The syntax <code>${instance.attribute}</code> loads an attribute from an instance of a Java class by calling its getter. In this case <code>${unit.code}</code> ends up calling <code>.getCode()</code> on the unit instance rather than accessing the field directly.</p>
<p>The <code>th:text</code> attribute is special and creates the body of a tag. For example, the span tag here creates a <code>&lt;span&gt;</code> whose body (between the opening and closing tags) contains the unit's title. Thymeleaf, unlike some other templating systems, doesn't let you include variables everywhere - some template engines let you just write <code>${variable}</code> anywhere in the HTML page, but thymeleaf only lets you do that in an attribute of a tag so if you simply want some text, you need to make a placeholder tag (<code>span</code> is a good choice here) and put the variable in its <code>th:text</code> attribute.</p>
<p>If you click on a unit, you get to the details page for that unit (that
currently doesn't have any more detail than the code and title). When you send a
HTTP request for <code>/unit/UNITCODE</code>, for example <code>/unit/COMSM0085</code>, this is
handled by the <code>unitDetailPage</code> method.</p>
<p>Note that the <code>@GetMapping</code> contains a pattern <code>/unit/{code}</code> with a parameter to match all URLs of this form, and the parameter is passed to the method as a parameter that is annotated with <code>@PathVariable</code> to tell spring how to deal with it, namely to fill its value from the path of the HTTP request.</p>
<p>The method first finds the unit in the database and returns a 404 error page if there is no unit with that code. (In a real database, there would be a "find unit by code" method, you would not have to load all units just to find one of them.)</p>
<p>After this, we call thymeleaf on the <code>unit.html</code> template (this is the one without 's' in its name) to render the unit page.</p>
<h2 id="exercises-3"><a class="header" href="#exercises-3">Exercises</a></h2>
<p><strong>Basic exercise:</strong> Rewrite the units list page to show the units in a table instead of a list. The table should have one row per unit and three columns: the first column should be the unit code, the second should be the unit title, and the third column should contain a link with text "details" that takes you to the details page for the unit. Also make a header row in the table with headings 'code', 'title' and 'link'. (This is purely a HTML and templating exercise, you do not need to change any Java code for this.)</p>
<p><strong>Intermediate exercise:</strong> Implement controller methods and templates for listing all students and viewing an individual student's details, analogous to the ones for units (you can choose whether you make a list or a table for the students - there are currently only two). You only need to show a student's id and name for now, not the grades. Note that the id is an integer, not a string. You can copy-paste the Unit controller code and templates and make the necessary changes to show students instead, but make sure you understand what the bits do that you're changing. The student class is in the <code>src/main/java/softwaretools/server02/model</code> folder.</p>
<p><strong>Intermediate exercise:</strong> The student class contains a method <code>getGrades()</code> that returns a list of pairs (unit, grade). The unit is a unit object, and the grade is an integer. On your student details page, make a table listing the titles and codes of all the units the student has taken, and the grades they got.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="css"><a class="header" href="#css">CSS</a></h1>
<p>CSS, or Cascading Style Sheets, allows you to set what your page looks like, separately from creating the content.</p>
<p><em>Not to be confused with <a href="https://cssbristol.co.uk/">CSS Bristol</a>.</em></p>
<h2 id="videos-2"><a class="header" href="#videos-2">Videos</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Video</th><th style="text-align: right">Length</th><th>Slides</th></tr></thead><tbody>
<tr><td><a href="https://web.microsoftstream.com/video/966c07b6-6f2f-4676-b348-e942101be174">CSS part 1</a></td><td style="text-align: right">14 minutes</td><td><a href="https://uob-my.sharepoint.com/:b:/g/personal/me17847_bristol_ac_uk/EXPRGR7nfbdLgB8krc9jTFcBHEH__HvV-vqXfbmYemGfnA?e=lwKNBI">slides</a></td></tr>
<tr><td><a href="https://web.microsoftstream.com/video/b38974b4-2675-4143-82c8-a8ff2c6a3288">CSS part 2</a></td><td style="text-align: right">10 minutes</td><td><a href="https://uob-my.sharepoint.com/:b:/g/personal/me17847_bristol_ac_uk/EaPEjEpM1JtNkDwYQyQ8tCUBFT6Q78VI4QKMSANf6jhfyg?e=VIS7eB">slides</a></td></tr>
</tbody></table>
</div>
<h2 id="mdn-1"><a class="header" href="#mdn-1">MDN</a></h2>
<p>For this workshop, please read the following pages:</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/First_steps">CSS first steps</a> including the 5 subpages linked under "Guides" - they are all meant for beginners so you should be able to get through them quickly.</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/Selectors">CSS selectors</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/The_box_model">The box model</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/Values_and_units">Values and units</a></li>
</ul>
<h2 id="exercises-4"><a class="header" href="#exercises-4">Exercises</a></h2>
<ul>
<li><a href="css/./text.html">Styling Text</a></li>
<li><a href="css/./framework.html">Frameworks</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="styling-text"><a class="header" href="#styling-text">Styling Text</a></h1>
<p>Under <a href="css/../resources/sometext.html">resources/sometext.html</a> you have a basic text-based HTML document with some information about your degree. Download this file and open it in your browser, you will see it displayed with the default stylesheet (and any customisations you might have applied, such as selecting a default font and size).</p>
<h2 id="reading-mode"><a class="header" href="#reading-mode">Reading Mode</a></h2>
<p>Many browsers have a <em>reading mode</em> which is meant to make text as east to read as possible. Let's simulate this - create a new link to a stylesheet in the header (call it something like <code>sometext.css</code>) and insert the following:</p>
<pre><code class="language-css">body {
    margin: 0 auto;
    max-width: 40em;
    line-height: 125%;
}
</code></pre>
<p>This already looks much better, but you can play with the parameters to get something that's perfect for you.</p>
<ul>
<li>The <code>max-width</code> is doing most of the work here, following the design principle (that's fairly well replicated with studies) that most people find text easier to read if lines are not much longer than some limit, quoted variously as <a href="https://baymard.com/blog/line-length-readability">around 60 characters</a>. Since an 'm' is wider than the average character and <code>em</code> rather than e.g. <code>px</code> is the correct thing to use here (as it's relative to the font being used), I went for 40em.</li>
<li>The <code>margin: 0 auto</code> centers content horizontally if it has a fixed width. The space around the text both gets the left margin away from the edge of the window, and gives the eye an area around the text free of distractions.</li>
<li>Increasing the line height follows the same principle, sometimes known as giving the text <em>room to breathe</em>. Experiment with differnt line heights if you like to see which one suits you best. Note: it's possible to overdo this. Double-spacing (<code>line-height: 200%</code>) was common for dissertations in the typewriter era, mainly to give proofreaders and markers space to write comments between the lines. This is considered bad design nowadays, and you should not do it.</li>
</ul>
<p>If you want, you can try a few other things:</p>
<ul>
<li>Change the <code>font-size</code>. The default is <code>16px</code> but depending on your screen size, resolution and distance from your eyes you might want a larger one.</li>
<li>Set a different <code>font-family</code>. The values <code>serif</code> and <code>sans-serif</code> give default choices across all operating systems, you could set this to a more specific font on yours such as <code>Calibri</code> (if on Windows) but bear in mind this will not work for Mac users.</li>
<li>Set a <code>background-color</code> on the body, either a light but not quite white one (pale yellow/brown is often used), or go dark mode with a dark backround and a light <code>color</code> for the font itself.</li>
</ul>
<div class="advanced container">
<header><span class="advanced-title"></span></header>
<div class="container-content">
<p>Tricks like this - which you can code as a browser extension if you want to - might be particularly helpful for visually impaired or dyslexic students so you can force any website to use fonts and styles that work for you.</p>
<p>If you are designing for dyslexic people other than yourself, the best you can do is give them a way to configure the fonts and colours themselves (for example with a menu that lets you change them via JavaScript) - different dyslexic people might have different preferences that work for them, for example one person may prefer serif fonts to sans-serif or the other way round, there is no one best design for everyone.</p>
<p>There are statistical trends which mean that "use sans serif fonts" is good advice if you have to pick one font (for example for printed material) but one of the advantages of the web is that you do not have to choose one font in advance, you can let different users select different preferences.</p>
</div>
</div>
<h2 id="starting-from-scratch"><a class="header" href="#starting-from-scratch">Starting from Scratch</a></h2>
<p>Uncomment the line that includes <code>reset.css</code> in the HTML file (comments go from <code>&lt;!--</code> to <code>--&gt;</code>, a relic of when HTML was connected with XML). The file is at <a href="css/../resources/reset.css">resources/reset.css</a> so download it to the same folder as your HTML file.</p>
<p>You now have almost no styling at all: headings, lists, paragraphs all just look like text.</p>
<p>In your own stylesheet, which you should include <em>after</em> <code>reset.css</code>, either try and recreate the default settings or try out ones that look good to you.</p>
<p>Headings are meant to stand out among the paragraphs, and the extra white space around them (padding or margin) is as important as the larger font size and bold font. You could try leaving headings the same size as the body font but still <code>font-weight: bold</code> and use just padding to make them stand out. (Since a heading relates to the text after it not the text before it, it is good design to have a greater margin/padding above the heading than below it.)</p>
<p>The default body font size is <code>font-size: 16px</code>. If you want to make the headings larger, you should not set an absolute value (such as 24px) but one relative to the default size. Since the default size comes from the <code>&lt;html&gt;</code> and <code>&lt;body&gt;</code> elements, you have two ways to do this: either with a percentage e.g. <code>h1 { font-size: 150%; }</code> which makes headings 1.5 times as big as the paragraph font, or using the <code>em/rem</code> units (setting a font size in ems refers to the em size of the parent unit).</p>
<p>In the browser, open the developer tools and type the following in the console and press ENTER:</p>
<pre><code class="language-js">document.body.style.fontSize="24px";
</code></pre>
<p>(Since this is JavaScript, the property is called <code>fontSize</code> not <code>font-size</code> as dashes are not allowed in identifiers.)</p>
<p>This increases the body text size from 16px to 24px (if you have manually set a different size in your stylesheet, you might need to set it to <code>"24px !important"</code> to override this). If you had set your headings to fixed sizes like 18px, then headings would now be smaller than the body text - if you have correctly used relative sizing, then headings will now still be 1.5 times as big as the body fonts or whichever multiple you set them to be. That is the right way to do it.</p>
<h2 id="vertical-rhythm"><a class="header" href="#vertical-rhythm">Vertical Rhythm</a></h2>
<p>Here is another design principle worth knowing about. Look at this image, part of a screenshot of one way to style the text on the page:</p>
<p><img src="css/rhythm1.png" alt="text in vertical rhythm layout" /></p>
<p>The principle here is that we imagine a grid with 20px high lines, and lay out everything according to that. Under <a href="css/../resources/baseline.png">resources/baseline.png</a> there is an image 1px wide and 20px high with the last pixel coloured pink. Download that image to the folder with the HTML file and set</p>
<pre><code class="language-css">body {
    background-image: url("baseline.png");
}
</code></pre>
<p>This will make the image repeat horizontally and vertically, and you can now see the design behind this approach:</p>
<p><img src="css/rhythm2.png" alt="text in vertical rhythm layout" /></p>
<p>The baselines of the paragraph text all sit on the grid lines. The important thing here is that when a heading interrupts the flow of text, the total height of the heading is an exact multiple of the grid height, even if the font size is different.</p>
<p>Try and recreate this layout or a similar one using vertical rhythm, starting from the reset stylesheet so you have to do everything yourself from scratch. Notes:</p>
<ul>
<li>The aim is that all paragraphs have their baselines on the grid, even if there are other elements (headlings, lists) earlier in the document.</li>
<li>This means that the total height of headings must be an exact multiple of the grid size; you can assume that the text in a heading does not require more than one line.</li>
<li>You should set all sizes, including margins and padding, in terms of relative units (either ems/rems or percentages).</li>
<li>The base font size here is the default 16px. Start with the max-width and line-height from the first example, and modify the line height if necessary for your font to get the lines of paragraph text the right distance apart.</li>
<li>The paragraphs themselves have a margin at the bottom (the empty line after the first paragraph) that also appears between paragraphs of text (not shown in the image) when one <code>&lt;p&gt;</code> tag follows another. You might also need to give them a small top padding to get the text on the lines, not between them.</li>
<li>The shading around the headings is <code>background-color: rgba(0, 0, 255, 0.25);</code> to be semitransparent and let the lines show through, to see that while the heading text itself doesn't have to sit on a grid line, the total height of a heading including padding does respect the grid. However this shading is just to motivate the layout: if you want an actual coloured background, then you should set a <code>padding-left: 0.5em;</code> or something on the headings to make the text not start just on the edge of a coloured box. This improves readability.</li>
<li>You will also need to style the <code>&lt;ul&gt;</code> list to have some spacing before and after, and to keep everything on the grid lines. You get the bullets back with the following code - or one of many other options <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/list-style">listed on MDN</a>:</li>
</ul>
<pre><code class="language-css">ul {
    padding-left: 2em; /* the bullets appear in the padding */
    list-style-type: disc;
    list-style-position: outside;
}
</code></pre>
<ul>
<li>Don't forget to style the link. <code>text-decoration: underline</code> is one option; or you can read more on MDN about <a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/Styling_text/Styling_links">styling links</a> including how to make a link someone has visited before look different to a new one.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="using-a-css-framework"><a class="header" href="#using-a-css-framework">Using a CSS Framework</a></h1>
<p>Now that you know some CSS, you could write your own framework - one or more stylesheet files that implement your idea of good design. In this exercise we will look at some examples.</p>
<h2 id="milligram"><a class="header" href="#milligram">Milligram</a></h2>
<p><a href="https://milligram.io">Milligram</a> is, in its own words, a "minimalist CSS framework".</p>
<p>Download the <a href="css/../resources/page1.html">page1.html</a> file and open it in the browser: it contains some text and a sign-up form for a CSS conference.</p>
<p>Add the following to the page head:</p>
<pre><code class="language-html">&lt;link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic"&gt;
&lt;link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.css"&gt;
&lt;link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.4.1/milligram.css"&gt;

</code></pre>
<ul>
<li>The first one loads Google's <a href="https://fonts.google.com/specimen/Roboto">Roboto web font</a>, which the designers of Milligram selected as their default. Because it is loaded as a web resource, it should work across different browsers and operating systems, you don't need to install it first.</li>
<li>The next line loads <code>normalize.css</code>, an alternative to <code>reset.css</code> that provides a consistent stylesheet across browsers. Try out the page with just the first two stylesheets and see how it looks now - the font won't have changed because no-one has set <code>font-family</code> yet, that will happen in the next stylesheet, but the margins will be slightly different.</li>
<li>The third one adds Milligram itself. Your page now uses a different style, for example the form fields and labels are laid out vertically and the register button is purple.</li>
</ul>
<p>Milligram chooses to style the whole page by default, but you can customise this further. One of their features is a <em>container</em> that gives its content a fixed maximum width.</p>
<ul>
<li>Add <code>class="container"</code> to the <code>&lt;main&gt;</code> element, save and reload. See how the page behaves when you make the window wider and narrower. The page will always have some left/right padding, but the form adapts to the window size.</li>
<li>In the developer tools, activate mobile mode a.k.a. <em>toggle device emulation</em>, on chrome/edge this is the second icon from the left in the top left of the developer panel. The text looks much too small now!</li>
<li>This is due to a number of factors including higher pixel density on mobile screens. Milligram can handle mobile devices, but it needs the following line in the header:</li>
</ul>
<pre><code class="language-html">&lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;
</code></pre>
<p>This line, which is often (but not always) good practice to include in a HTML5 page anyway, tells a mobile browser (or a device pretending to be one) to adopt sensible defaults including larger fonts depending on the pixel density and no horizontal scrollbars. You can read more about this <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Viewport_meta_tag">on MDN</a>.</p>
<p>On <a href="https://milligram.io/#typography">the milligram documentation page</a> you can read more about the elements that Milligram styles for you, and how you can customise this (e.g. buttons).</p>
<p>Have a look in your browser's developer tools at how Milligram styles the page: select an element in the <em>Elements</em> tab (or right-click it and choose <em>Inspect</em>), then look at the styles that appear in the <em>Styles</em> area. How does Milligram set the following?</p>
<ul>
<li>Size of heading fonts</li>
<li>Form fields take up the full width of the container</li>
<li>Form labels and fields appear below each other</li>
<li>Labels are closer to their own field than the field above</li>
<li>Size and centering of everything in a container on wide enough screens</li>
</ul>
<h2 id="bulma"><a class="header" href="#bulma">Bulma</a></h2>
<p><a href="https://bulma.io">Bulma</a> is a larger but still fairly lightweight CSS framework. Unlike Milligram, it only styles parts of the page you tell it to (but it sets a default font), and it has some more components to build things like menus or panels.</p>
<p>Start with <a href="css/../resources/page2.html">page2.html</a>, have a look at the raw page and then add the following to the header (the viewport tag is already there):</p>
<pre><code class="language-html">&lt;link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.css"&gt;
</code></pre>
<div class="advanced container">
<header><span class="advanced-title"></span></header>
<div class="container-content">
<p>Bulma, like most frameworks, comes in two formats: <code>bulma.css</code> is the CSS file with human-readable formatting, and <code>bulma.min.css</code> (at the same location) is the minified version with all unnecessary whitespace removed and so is slightly quicker to download.</p>
<p>The bulma sources <a href="css/github.com/jgthms/bulma">on github</a> are actually in SASS format, a language that compiles to CSS but offers extra features in the source file like nested blocks and variables. (After SASS was created, variables were introduced in CSS too, but with a different syntax.)</p>
</div>
</div>
<p>Bulma works with custom class names. For example, we are going to make the first heading into a banner that spans the whole page width - called a <em>hero</em> in web design circles. Bulma has classes for this.</p>
<ul>
<li>First, add <code>class="title"</code> to the h1 heading, save and reload the page.</li>
</ul>
<p>This tells bulma to style it as a title/heading element. On the <a href="https://bulma.io/documentation/elements/title/">title element page</a> you can see that the correct way to get a top-level heading is with the classes <code>"title is-1"</code>, whereas a <code>"title is-2"</code> would be a second-level heading (slightly smaller font):</p>
<pre><code class="language-html">&lt;h1 class="title is-1"&gt;Title 1&lt;/h1&gt;
&lt;h2 class="title is-2"&gt;Title 2&lt;/h2&gt;
</code></pre>
<p>This looks like you are saying the same thing twice, and you are, but it lets you keep the structure and the styling separate - tag names give structure, class names give styling. Note that this method is a convention by the bulma designers, which other designers might not agree with, not part of the HTML/CSS standard.</p>
<p>Now to the hero part. According to the bulma documentation for the <a href="https://bulma.io/documentation/layout/hero/">hero component</a>, we need a container with class <code>hero</code> and a direct child with class <code>hero-body</code>, so</p>
<ul>
<li>Add class <code>hero</code> to the header tag.</li>
<li>Add a child div <code>hero-body</code> inside it that wraps the <code>h1</code> tag.</li>
<li>Set the classes <code>title is-1</code> on the h1 tag itself.</li>
</ul>
<p>You now have an eye-catching element at the top of your page.</p>
<p>Bulma also lets you give an element the class <code>content</code> to tell it to style everything within that tag based on the tag names. Class <code>section</code> creates a section with spacing before/after, and class <code>container</code> makes something fixed width and centered.</p>
<ul>
<li>Add class <code>content</code> on the <code>main</code> tag. Reload the page and observe the changes.</li>
<li>Add a <code>div</code> inside main that wraps all the content inside, and give it class <code>container</code>. Reload again and observe the change.</li>
<li>Notice that the first h2 heading text touches the bottom of the hero area, which is not good design - text needs space between it and edges of coloured areas. Create a section tag as the direct child of the container, and give it class <code>section</code> so your code should look like this:</li>
</ul>
<pre><code class="language-html">&lt;main class="content"&gt;
    &lt;div class="container"&gt;
        &lt;section class="section"&gt;
            ... content ...
</code></pre>
<p>For the next exercise, style the form.</p>
<ul>
<li>Put another section tag around the form and its heading (so the container tag will have two direct children, both of them sections).</li>
<li>Using the bulma <a href="https://bulma.io/documentation/form/general/">form documentation</a>, add tags and classes to the form as necessary so it looks similar to the Milligram one (full width fields, labels immediately above the fields, coloured button with rounded corners). You don't have to make the button purple, use <code>is-primary</code> to make it blue.</li>
</ul>
<p>Finally, add and style a <a href="https://bulma.io/documentation/components/">bulma component</a> of your own choice on the page.</p>
<h2 id="bootstrap"><a class="header" href="#bootstrap">Bootstrap</a></h2>
<p>The most popular CSS framework is <a href="https://getbootstrap.com">bootstrap</a>, developed by Twitter. If you are interested and have some spare time, you can have a look at it - it has lots of different components and options to customise the styling further with themes.</p>
<p>Bootstrap includes a JavaScript file as well as a stylesheet: for some components like tabbed pages, you need the scripts to make clicking on a tab switch to the correct content.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="css-grids"><a class="header" href="#css-grids">CSS grids</a></h1>
<h2 id="videos-3"><a class="header" href="#videos-3">Videos</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Video</th><th style="text-align: right">Length</th><th>Slides</th></tr></thead><tbody>
<tr><td><a href="https://web.microsoftstream.com/video/ef9e9dcf-f9b8-4bcf-8ac6-f8608514cc22">Design</a></td><td style="text-align: right">13 minutes</td><td><a href="https://uob-my.sharepoint.com/:b:/g/personal/me17847_bristol_ac_uk/EUlNRBt92L9MmCs7UUPFCnsBfrW30OIZiFGjrzvBEdPAGQ?e=FmmJEW">slides</a></td></tr>
<tr><td><a href="https://web.microsoftstream.com/video/93c2a47c-5fd4-432d-9f93-71e7181fd104">CSS grids</a></td><td style="text-align: right">7 minutes</td><td><a href="https://uob-my.sharepoint.com/:b:/g/personal/me17847_bristol_ac_uk/EbxgG7O3lb1MoSgwQuUMDZ8B8WBnR0ZyiBD0Q1hQk9P9eg?e=ks2kqT">slides</a></td></tr>
<tr><td><a href="https://web.microsoftstream.com/video/d2099c95-eef3-474e-9ae8-4f5a84521d18">Responsive Layout</a></td><td style="text-align: right">3 minutes</td><td><a href="https://uob-my.sharepoint.com/:b:/g/personal/me17847_bristol_ac_uk/Ebvt4NOYIGtHvJDTNsbXK4kBzon6XArErDCWxs74DzyNgA?e=jJRS8E">slides</a></td></tr>
</tbody></table>
</div>
<h2 id="mdn-2"><a class="header" href="#mdn-2">MDN</a></h2>
<p>Please read the following pages, and play with the interactive examples:</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Normal_Flow">Normal flow</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Grids">CSS grids</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Media_queries">Media queries</a></li>
</ul>
<h2 id="exercises-5"><a class="header" href="#exercises-5">Exercises</a></h2>
<ul>
<li><a href="cssgrid/./intro.html">Introduction</a></li>
<li><a href="cssgrid/./curriculum.html">Curriculum exercise</a></li>
<li><a href="cssgrid/./trees.html">Trees (responsive layout)</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="css-grids-introduction"><a class="header" href="#css-grids-introduction">CSS grids introduction</a></h1>
<p>To create a CSS grid, you place a container element (usually a <code>&lt;div&gt;</code>) and style it <code>display: grid</code>. All its direct children will now be laid out in a grid, and you can configure the general layout on the parent element:</p>
<ul>
<li><code>grid-template-columns</code> defines the number and widths of the columns.</li>
<li><code>gap</code> (which should have been called <code>grid-gap</code>, but is not) defines the gap between different grid cells.</li>
<li>For a gap around the outside of the grid, give the container a margin (or padding).</li>
</ul>
<p>On the child elements, you can set the placement rules for each one and the browser will build the grid accordingly:</p>
<ul>
<li>By default, each child takes up the next free 1x1 space.</li>
<li><code>grid-row</code> and <code>grid-column</code> modify this:
<ul>
<li><code>span N</code> makes a child element N cells wide/tall.</li>
<li><code>M / N</code> positions the child absolutely from dividing line M to dividing line N (you can overlap or stack elements on top of each other this way if you want to).</li>
</ul>
</li>
</ul>
<p>There are many more things that you can do with grids, and your best resources if you need to look this up are:</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Grids">Grids on MDN</a></li>
<li><a href="https://css-tricks.com/snippets/css/complete-guide-grid/">CSS-tricks complete guide to grids</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="exercise-curriculum"><a class="header" href="#exercise-curriculum">Exercise: Curriculum</a></h1>
<p>Download the file <a href="cssgrid/../resources/curriculum.html">curriculum.html</a> and open it in an editor.</p>
<p>You can see that it references a stylesheet file <code>curriculum.css</code> in the same folder, so create that file.</p>
<p>Your task is to write a stylesheet to make the curriculum look like this (for this exercise, we do not care about responsive layout):</p>
<p><img src="cssgrid/curriculum.png" alt="image of the curriculum" /></p>
<p><em>(If you are a MEng student, mentally replace "individual project" with "group project" in 3rd year and then 4th year should follow the same layout as 3rd year, but you don't have to edit this in the file for this exercise.)</em></p>
<p>The units are coded like this in the file:</p>
<pre><code>&lt;main&gt;
    &lt;div class="unit y1-tb1 cp20"&gt;
        &lt;b&gt;COMS10014&lt;/b&gt;
        &lt;p&gt;Mathematics A&lt;/p&gt;
    &lt;/div&gt;
</code></pre>
<p>Each unit is a <code>&lt;div&gt;</code> with class <code>unit</code> and further classes declaring its teaching block and weight in credit points. SPE in year 2 is special and is the only unit declared as <code>y2-tb4</code> with no CP class. By the way, why did we choose <code>cp20</code> and not <code>20cp</code> as the class name?</p>
<p>We are being pedantic here about separating content/structure (in the HTML file) and styling/layout (which you will write in a CSS file). There is no hint in the HTML file that the aim of the exercise is to lay the units out on a grid!</p>
<div class="advanced container">
<header><span class="advanced-title"></span></header>
<div class="container-content">
<p>Our class names are purely semantic - they describe attributes of the units (academic year, teaching block, credit points), not how they should be displayed. There is some debate among web developers and designers just how far you should take this separation; we are being absolutely purist for this exercise, but even bootstrap, one of the most widely used web libraries, has classes like <code>.col-4</code> to make something four columns wide. In practice the answer to how you separate concerns between HTML and CSS is really a case of "it depends".</p>
</div>
</div>
<p>Some general styles that you can apply in your <code>curriculum.css</code>:</p>
<pre><code class="language-css">body {
    font-family: sans-serif;
    background-color: rgba(112, 145, 53, 0.1);
}

.unit {
    background-color: rgba(0, 67, 79, 0.2);
}

.unit b {
    display: block;
    background-color: rgb(0, 67, 79);
    color: white;
    padding: 5px;
}

.unit p {
    padding: 5px;
}
</code></pre>
<p>This sets the colour scheme (derived from the official University of Bristol one), and some sensible padding/margins. The <code>&lt;p&gt;</code> elements already come with a default margin that we don't want to change here, but note that we applied the background colour for the text boxes to the <code>&lt;div class="unit"&gt;</code> element itself, not the <code>&lt;p&gt;</code> elements otherwise the margin of the <code>&lt;p&gt;</code> elements would not be coloured in. The 5px paddinjg that we declared everywhere creates some space between the text and the edge of the boxes, which makes the text easier to read.</p>
<p>We used <code>&lt;b&gt;</code> tags for the title bars that are normally inline elements, but we redefined them to be block elements here (this is allowed) so they span the whole width of their grid cell.</p>
<h2 id="exercise"><a class="header" href="#exercise">Exercise</a></h2>
<ul>
<li>The grid should be applied to the <code>&lt;main&gt;</code> element, with 12 equally wide columns and a maximum width of 1500px overall; you can center the grid for even wider screens with <code>margin: 0 auto;</code> on the main element.</li>
<li>The gap between grid cells is <code>15px</code>.</li>
<li>10CP units should take up 2 of the 12 columns in width, 15CP units 3 columns, and 20CP units 4 columns. The 40CP project is 8 columns wide.</li>
<li>All units are one row high except SPE which is 2 rows high.</li>
<li>The aim of the exercise is not to write an individual rule for each unit! Try and use as few rules as necessary, you can do it with one rule per individual class that appears in the source file (you can even do it with a couple of rules less if you really understand grid layout).</li>
<li>The main challenge will be getting the SPE unit placed correctly, and since this disrupts the normal flow of the layout, writing the necessary rules to get everything else after that to go in its correct place again.</li>
</ul>
<p>Extra challenge:</p>
<ul>
<li>Notice that the gap between the academic years is twice as large as that within years (e.g. the vertical space between COMS10013 and COMS20007 is twice that between COMS10014 and COMS10013).</li>
<li>This can be achieved by leaving an empty grid row between the years, thus doubling the grid gap. That is, Year 1 lives in rows 1 and 2; row 3 is empty; Year 2 lives in rows 4 and 5 and so on - the empty row 3 has a height of 0 and no elements, but there are two gaps between rows 2 and 3, and 3 and 4, that separate the Year 1 from Year 2 units.</li>
<li>Alternatively, you could add extra margin (why not padding?) to the bottom of all TB2/TB4 units to achieve the same effect.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="responsive-layout-trees-exercise"><a class="header" href="#responsive-layout-trees-exercise">Responsive layout: trees exercise</a></h1>
<p>Download the <a href="cssgrid/../resources/trees.tar.gz">trees.tar.gz</a> file for this exercise and extract it (<code>tar -zxvf FILENAME</code>) to a folder, then open <code>trees.html</code> in your editor. Create an empty <code>trees.css</code> in the same folder and open that too.</p>
<p>The file contains images and English and Latin names of some trees at <a href="https://www.forestryengland.uk/westonbirt-the-national-arboretum">Westonbirt, the UK national arboretum</a>.</p>
<p>Your task is to write a stylesheet to create a responsive grid layout.</p>
<p>On media that is 600px or wider, the page should look like this:</p>
<p><img src="cssgrid/./trees-wide.png" alt="4 column layout above 600px" /></p>
<p>(The image for Lawson's Cypress is one single PNG like the others, there is nothing special to do here to fit in two images side by side.)</p>
<p><em>The small-leaved lime (Tilia Cordata) featured here is believed to be over 2000 years old, making it one of the oldest trees in Britain.</em></p>
<p>From 400px to 600px, the page should show all trees except the "featured" ones in two columns:</p>
<p><img src="cssgrid/./trees-medium.png" alt="2 column layout above 400px" /></p>
<p>And below 400px width, all trees should be shown in a single column layout, whether featured or not.</p>
<p>Each tree is defined in the HTML file with an element like this:</p>
<pre><code class="language-html">&lt;div class="card"&gt;
    &lt;img class="card-image" src="images/cedrus_atlantica.jpg" alt="Cedrus Atlantica"/&gt;
    &lt;span class="latin-name"&gt;Cedrus Atlantica&lt;/span&gt;
    &lt;span class="common-name"&gt;Atlas Cedar&lt;/span&gt;
&lt;/div&gt;
</code></pre>
<p>The two "featured" trees at the start also have class <code>featured</code> on their card element.</p>
<h2 id="exercise-1"><a class="header" href="#exercise-1">Exercise</a></h2>
<p>General non-grid-related CSS that you can just paste in:</p>
<pre><code class="language-css">body {
    font-family: "Open Sans", sans-serif;
    margin: 0;
}

header {
    background-color: #04443c;
    color: white;
    margin: 0;
    padding: 10px;
    padding-left: 50px;
}

.card {
    background-color: #167f5f;
    color: white;
}

.card-image {
    max-width: 100%;
    height: auto;
}

.card span.latin-name {
    display: block;
    font-style: italic;
    padding: 10px;
    padding-bottom: 0;
}

.card span.common-name {
    display: block;
    padding: 10px;
    padding-top: 5px;
    font-weight: bold;
}
</code></pre>
<ul>
<li>The grid should be horizontally centered if the screen is wider than the grid, by setting <code>margin: 0 auto</code> on the container.</li>
<li>The grid should be applied to the container div, with  a margin of 20px on top and bottom (this has to come after the horizontal centering), and a padding of 10px on left and right (this has to be padding, not margin, to avoid undoing the centering again).</li>
<li>Set a grid gap of 20px.</li>
<li>If the screen is at least 600px wide, then the container should have a maximum width of 960px and four equally wide columns. Featured trees should take up a 2x2 space on the grid, all other trees a 1x1 space.</li>
<li>Between 400px and 600px, the grid should only be two columns wide, trees still take up 2x2 space if featured and 1x1 otherwise.</li>
<li>Below 400px, make a grid with only one column, and all trees take up 1x1 space. Note that you do not need to do anything for this as this is the default - just make sure that your other grid rules such as making featured trees 2x2 only apply on larger screens.</li>
</ul>
<p>Test this out by making your browser window wider and narrower. You cannot normally make a chrome/edge window narrower than 400px, but there are two workarounds. With the F12 developer tools open, you can position them to the right of the window and then drag the divider to make the actual page width as narrow as you want, or you can switch to "mobile" mode (second icon in top left of developer tools, usually) and manually set a page size or select one from a dropdown list of common phone models.</p>
<div class="advanced container">
<header><span class="advanced-title"></span></header>
<div class="container-content">
<p>In practice, one would use a layout like this to make the individual grid elements clickable (such as news stories, or in this case links to a more detailed page about the tree).</p>
<p>One way to do this would be to use <code>&lt;a class="card" href="..."&gt;</code> elements instead of <code>&lt;div&gt;</code> ones, and set them manually to <code>display:block</code>. This has the advantage that the entire card, including the image, becomes clickable. An <code>&lt;a&gt;</code> tag can contain arbitrary content, not just text.</p>
</div>
</div>
<div style="break-before: page; page-break-before: always;"></div><h1 id="javascript"><a class="header" href="#javascript">JavaScript</a></h1>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript">JavaScript</a> is a programming language for creating dynamic web pages.</p>
<h2 id="videos-4"><a class="header" href="#videos-4">Videos</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Video</th><th style="text-align: right">Length</th><th>Slides</th></tr></thead><tbody>
<tr><td><a href="https://web.microsoftstream.com/video/2dc6a701-fa1a-40d8-89c2-27e99e976d7f">JavaScript: Basics</a></td><td style="text-align: right">24 minutes</td><td><a href="https://uob-my.sharepoint.com/:b:/g/personal/me17847_bristol_ac_uk/EfidO6rhwlhPs_AZSgBCH18BJ6eR1Zz4mIOpcbAiYxPpTQ?e=7KrHSL">Slides</a></td></tr>
<tr><td><a href="https://web.microsoftstream.com/video/0d40a41d-ed42-4441-8635-2cb8d452ed16">JS Objects (incl. JSON)</a></td><td style="text-align: right">5.21 minutes</td><td><a href="https://uob-my.sharepoint.com/:b:/g/personal/me17847_bristol_ac_uk/EYtHZ1I7R3BLgZdjTgvO_lQB5SMzb6CbIX1XIUBIYyPd7Q?e=QQUJY1">Slides</a></td></tr>
<tr><td><a href="https://web.microsoftstream.com/video/f9547854-f642-4b40-8800-7daab588c363">Object Oriented Programming</a></td><td style="text-align: right">9.40 minutes</td><td><a href="https://uob-my.sharepoint.com/:b:/g/personal/me17847_bristol_ac_uk/EXKvkOEwbmBNpw9Cmx8iiwUBkFJ1fv8t_qK8shkrVBsQtQ?e=hCMG3L">Slides</a></td></tr>
<tr><td><a href="https://web.microsoftstream.com/video/d5072390-853b-49a0-888c-9ed086b044df">Asynchronous JavaScript</a></td><td style="text-align: right">12 minutes</td><td><a href="https://uob-my.sharepoint.com/:b:/g/personal/me17847_bristol_ac_uk/ERxtlsuDqslLtKOvIPCkxPwBWjsg85cJjoQIp6JdKeXUuA?e=Fm1PiJ">Slides</a></td></tr>
</tbody></table>
</div>
<p>Some example code can be found in the
<a href="https://github.com/cs-uob/COMSM0085/tree/master/code/javascript"><code>code/javascript</code></a>
folder of the repository.</p>
<h2 id="readings"><a class="header" href="#readings">Readings</a></h2>
<h3 id="essential"><a class="header" href="#essential">Essential</a></h3>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/JSON">MDN: Working with JSON</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Client-side_web_APIs/Manipulating_documents">MDN: Manipulating documents</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Asynchronous/">MDN: Asynchronous JavaScript</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Client-side_web_APIs/Fetching_data">MDN: Fetching data from the server</a> (skip the section on <code>XMLHttpRequest</code>)</li>
</ul>
<h3 id="further"><a class="header" href="#further">Further</a></h3>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions">MDN: Arrow functions</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model">MDN: Document Object Model (DOM)</a> (see guides on the left)</li>
<li><a href="https://www.destroyallsoftware.com/talks/wat">Wat</a>, a famous <a href="https://en.wikipedia.org/wiki/Lightning_talk">lightning
talk</a> by Gary Bernhardt (2012).</li>
</ul>
<h3 id="advanced"><a class="header" href="#advanced">Advanced</a></h3>
<p>The following references go significantly beyond the curriculum.</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Inheritance_and_the_prototype_chain">MDN: Inheritance and the prototype chain</a>. This is a guide to the protoyping-style object-orientation of JavaScript.</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/EventLoop">MDN: The event loop</a>. This explains the concurrency model of JavaScript, as well as the way asynchronous code and promises arehandled.</li>
<li><a href="https://sourceacademy.org/sicpjs/">Structure and Interpretation of Computer Programs, JS edition</a> (2022). This is a classic programming book that has been recently rewritten in JavaScript.</li>
<li>Boris Cherny, "<a href="https://bris.on.worldcat.org/oclc/1099253345">Programming TypeScript</a>" (2019). This is a book-length introduction to TypeScript, a typed extension to JavaScript which is also supported by React.</li>
</ul>
<h2 id="exercises-6"><a class="header" href="#exercises-6">Exercises</a></h2>
<ul>
<li><a href="js/./single.html">A single-page app</a></li>
<li><a href="js/./static.html">Static structure</a></li>
<li><a href="js/./dynamic1.html">Dynamic structure, part 1</a></li>
<li><a href="js/./dynamic2.html">Dynamic structure, part 2</a></li>
<li><a href="js/./exercises.html">Further exercises</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="a-single-page-application"><a class="header" href="#a-single-page-application">A single-page application</a></h1>
<p>This activity is about developing a very simple, <a href="https://en.wikipedia.org/wiki/Single-page_application">single-page web
application</a> in HTML,
CSS, and JavaScript. The point is to do this with basic JavaScript, i.e. using
just the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">Fetch API</a>
and manipulating the
<a href="https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model">DOM</a>.</p>
<p>The purpose of the application is:</p>
<ul>
<li>to use the <a href="https://opendata.bristol.gov.uk/">Bristol City Council API</a> to
fetch population data</li>
<li>at the press of a button corresponding to each <a href="https://en.wikipedia.org/wiki/List_of_wards_in_Bristol_by_population">Bristol
ward</a>,
present that data nicely in a table</li>
</ul>
<h2 id="setup"><a class="header" href="#setup">Setup</a></h2>
<p>Because you will need a browser to run this application, it is best if you run
it on your actual machine. After all, the point of web applications is that they
are (sort of) <em>portable</em>, i.e. they are able to run and present virtually
identical behaviour on all sorts of machines. (This is not entirely true
however, because different JavaScript engines may fail to support various
language features.)</p>
<p>A basic version of the app can be found at
<a href="https://github.com/cs-uob/COMSM0085/blob/master/code/javascript/bristol-app"><code>code/javascript/bristol-app</code></a>
in the repository. It comprises three files:</p>
<pre><code>app.html
style.css
script.js
</code></pre>
<p>We will go through each one in detail. But before we do so, point your browser
at <code>app.html</code> and try the application.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="static-structure"><a class="header" href="#static-structure">Static structure</a></h2>
<p>The static structure of our application is given by the <code>app.html</code> file, as
styled by <code>style.css</code>.</p>
<h3 id="html"><a class="header" href="#html">HTML</a></h3>
<p>The main html file <code>app.html</code> is surprisingly unassuming: it contains almost
nothing of substance! In fact, we can quote the complete file here:</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
  &lt;head&gt;
    &lt;meta charset="utf-8" /&gt;
    &lt;title&gt;The City of Bristol&lt;/title&gt;
    &lt;link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&amp;display=swap" rel="stylesheet"&gt;
    &lt;link rel="stylesheet" href="style.css" /&gt;
    &lt;script src="script.js"&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;header&gt;&lt;h1&gt;The City of Bristol&lt;/h1&gt;&lt;/header&gt;
    &lt;nav id="nav"&gt;
      &lt;div class="initial"&gt;Initialising...&lt;/div&gt;
    &lt;/nav&gt;
    &lt;main id="dataPane"&gt;
      &lt;div class="initial"&gt;Please select one of the wards on the left to view more data about it.&lt;/div&gt;
    &lt;/main&gt;
    &lt;footer&gt;created by G. A. Kavvos&lt;/footer&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>This is a very standard HTML file, which readily passes the <a href="https://validator.w3.org/">W3
validator</a>. It consists of a <code>&lt;head&gt;</code> and a <code>&lt;body&gt;</code>.</p>
<ul>
<li>The <code>&lt;head&gt;</code> sets the title, loads some nice fonts from the web, and declares
that <code>style.css</code> is the stylesheet. Finally, the <code>&lt;script&gt;</code> tag tells the
browser that there is JavaScript code to be run in the file <code>script.js</code>, which
will be retrieved from the same location as the page that is being loaded.</li>
</ul>
<div class="advanced container">
<header><span class="advanced-title"></span></header>
<div class="container-content">
<p>If you look at introductory content on JavaScript on the internet, you will find many examples where JavaScript is included in a so-called <em>inline</em> style. <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script#examples">For example</a>, you might see code of the form</p>
<pre><code class="language-javascript">&lt;script&gt;alert("Hello World!");&lt;/script&gt;
</code></pre>
<p>which embeds a fragment of JavaScript directly in the HTML file, instead of
putting it in a separate <code>.js</code> file, and including it using an <code>src=</code> attribute
like we did above.</p>
<p><strong>Do not do this. This is very bad style. Always keep HTML and JS in separate files.</strong></p>
</div>
</div>
<ul>
<li>The <code>&lt;body&gt;</code> describes a document with four sections:
<ul>
<li>There is a <code>&lt;header&gt;</code> with a big heading reading "The City of Bristol".</li>
<li>There is a <code>&lt;nav&gt;</code> <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/nav">navigation
section</a>,
with a single <code>&lt;div&gt;</code> (i.e. a <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/div">generic block
container</a>)
with placeholder text saying "Initialising...".</li>
<li>Then then there is a <code>&lt;main&gt;</code> section, which contains a single <code>&lt;div&gt;</code> with
some instructions for using the app.</li>
<li>Finally, there is a <code>&lt;footer&gt;</code> with the author's name in it.</li>
</ul>
</li>
</ul>
<p>The two <code>&lt;div&gt;</code>'s are instances of the <code>.initial</code> class. Both <code>&lt;nav&gt;</code> and
<code>&lt;main&gt;</code> have unique id attributes, so they can be referred to uniquely.</p>
<div class="advanced container">
<header><span class="advanced-title"></span></header>
<div class="container-content">
<p>It is generally agreed that <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/id">id attributes must be
unique</a>
in an HTML document. However, there is no enforcing mechanism for this: the
browser will <em>not</em> check that we have not mistakenly re-used an id for some
other tag. Again, this is in the interest in providing a smooth user experience
without errors. Do not abuse this!</p>
</div>
</div>
<p>This sparse document structure will be all that we need to present our single-page application.</p>
<h3 id="css-1"><a class="header" href="#css-1">CSS</a></h3>
<p>Go ahead and open up <code>app.html</code> in your browser of choice. You will see that the
structure described by the tags above appear in very particular places.</p>
<p>Indeed, the location and appearance of the four sections (header, nav, main,
footer) are set in the <code>style.css</code> file, which is explicitly loaded in
<code>app.html</code>. The main things to note are the first few lines</p>
<pre><code class="language-css">html {
  font-size: 12pt;
  font-family: 'Libre Baskerville', serif;
}

body {
  display: grid;
  grid-template-columns: 200px 1fr;
}
</code></pre>
<p>which tell the browser to</p>
<ul>
<li>use the Libre Baskerville font (loaded in the <code>&lt;head&gt;</code>) throughout the entire document, and</li>
<li>lay out the <code>&lt;body&gt;</code> of the document using CSS grids.</li>
</ul>
<p>We will not dwell on the grid structure here, but note that, as the <code>&lt;nav&gt;</code>
comes first, it becomes the first <code>200px</code> column, and the <code>&lt;main&gt;</code> section
becomes the <code>1fr</code> column.</p>
<p>The <code>style.css</code> file also sets many other details, such as margins, colours, etc.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="dynamic-structure-part-1"><a class="header" href="#dynamic-structure-part-1">Dynamic structure, part 1</a></h2>
<p>When you point your browser at <code>app.html</code>, the "Initialising..." string appears
in the left of the screen (the <code>&lt;nav&gt;</code>) only for a fraction of a second. This is
the time it takes to load and execute the code in <code>script.js</code>, which provides
the dynamic behaviour of the app.</p>
<h3 id="making-some-buttons"><a class="header" href="#making-some-buttons">Making some buttons</a></h3>
<p>Indeed, looking at <code>script.js</code> we notice that it goes straight into business:</p>
<pre><code class="language-javascript">window.onload = function () {
  let wards = fetch('https://opendata.bristol.gov.uk/api/v2/catalog/datasets/wards/records?limit=50&amp;select=name,ward_id')
    .then(response =&gt; response.json())
    .then(populateWards)
    .catch(err =&gt; console.log(err));
}
</code></pre>
<p>This fragment of code creates a function, and assigns it to
<a href="https://developer.mozilla.org/en-US/docs/Web/API/Window"><code>window</code></a>.<a href="https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onload"><code>onload</code></a>.
This means that this function, which takes no arguments, will be called when the
browser window has finished loading the page.</p>
<p>The body of the function makes an HTTP request to the Bristol City Council API.
This returns a promise; when it is resolved, it is parsed as JSON, which itself
creates another promise. Finally, when <em>that</em> promise is resolved, the
<code>populateWards</code> function is called with the fetched JSON as argument. If any of
these steps cause an error, the last line catches it, and prints it on the
console (only visible if you press F12). These four lines are a modern
JavaScript idiom that uses all the latest technology: the fetch API; promises;
and higher-order, anonymous functions.</p>
<p>One might wonder: what will the input passed to <code>populateWards</code> in this call
look like? To answer this we can peek at the above URL and see what it returns:
on any Linux machine we may run</p>
<pre><code>curl -X 'GET' 'https://opendata.bristol.gov.uk/api/v2/catalog/datasets/wards/records?select=name,ward_id' | json_pp | less
</code></pre>
<p>which will make a <code>GET</code> request at this URL, parse the result as JSON
(<code>json_pp</code>), and display it in scrollable format (<code>less</code>). The result looks a
lot like this:</p>
<pre><code class="language-javascript">{
   "links" : ...,
   "records" : [
      {
         "links" : ...,
         "record" : {
            "fields" : {
               "name" : "Eastville",
               "ward_id" : "E05010897"
            },
            "id" : "996b607b4c31e6aca6a7614bd02ea18a4c14c525",
            "size" : 40500,
            "timestamp" : "2020-09-03T10:02:58.597Z"
         }
      },
      {
         "links" : ...,
         "record" : {
            "fields" : {
               "name" : "Southville",
               "ward_id" : "E05010914"
            },
            "id" : "bc2f85ccc34ca606a2fe6473491b5fc50fd4e0d1",
            "size" : 25544,
            "timestamp" : "2020-09-03T10:02:58.597Z"
         }
      },
      ...
   ],
   "total_count" : 34
}
</code></pre>
<p>I have abbreviated the <code>links</code> fields, which add a lot of noise to the output.
We can thus see that this HTTP request returns a JSON object which contains the
names and ward IDs of all the wards of the city of Bristol! The final field
returns the total record count, which is 34.</p>
<p>Unlike SQL databases, which come with a strongly-typed data schema, the data
here is semi-structured at best. We may discern its structure by looking at the
above output. The top-level object has a <code>records</code> field, which contains an
array of records. Each of these records is a JSON object itself. Its <code>record</code>
field contains a field called <code>fields</code>, which contains the <code>name</code> and <code>ward_id</code>
of each ward.</p>
<div class="advanced container">
<header><span class="advanced-title"></span></header>
<div class="container-content">
<p>One might ask: how did I figure out the correct URL to obtain all the wards?</p>
<p>Unlike relational databases, where a predetermined schema tells the developer
exactly where to look, the situation with APIs is more of a trial-and-error
affair. Many APIs you will have to use in your life are poorly documented, and
using them invovles some guesswork.</p>
<p>In this particular instance, I went on the <a href="https://opendata.bristol.gov.uk/explore/?sort=modified">Open Data
Bristol</a> website, and
looked through the available datasets. There I found a dataset called
<a href="https://opendata.bristol.gov.uk/explore/dataset/wards/information/">'Wards'</a>.
The description seemed to match what I wanted, which was confirmed by clicking
on the 'Table' tab, and seeing some sample data.</p>
<p>Using the 'API' tab on the same page is misleading, as it presents an interface
for querying the old version (v1) of their API. Following the link to the <a href="https://opendata.bristol.gov.uk/api/v2/console">'full
API console'</a> reveals that
there is a modern, REST-type API (v2), described in a format known as
<a href="https://swagger.io/docs/specification/about/">OpenAPI</a>. This is the current
industry standard for describing REST APIs.</p>
<p>Looking through the documentation, it was evident that the endpoint of interest is</p>
<pre><code>/catalog/datasets/{dataset_id}/records
</code></pre>
<p>I replaced <code>{dataset_id}</code> with the id of the ward dataset (<code>wards</code>). I also
passed in two query parameters:</p>
<ul>
<li><code>limit=50</code> which limits the response to contain at most 50 data points in the JSON object (which is way more than the Bristol wards)</li>
<li><code>select=name,ward_id</code> which limits the fields in the response to those in which we are interested</li>
</ul>
<p>To test this I used variations of the above <code>curl</code> command, and looked at the output.</p>
</div>
</div>
<p>Now that we understand the structure of the data returned from that endpoint, we can go ahead and write the <code>populateWards</code> function:</p>
<pre><code class="language-javascript">function populateWards(wards) {
  let buttons = new DocumentFragment();

  wards.records.forEach(w =&gt; {
      const [id, name] = [w.record.fields.ward_id, w.record.fields.name];
      const b = document.createElement("button");
      b.textContent = name;
      b.onclick = displayData(id, name);
      buttons.appendChild(b);
  });
  
  let nav = document.getElementById("nav");
  nav.textContent = '';
  nav.append(buttons);
}
</code></pre>
<p>This function is a callback that will receive the JSON object containing ward names.</p>
<p>The first line creates a
<a href="https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment"><code>DocumentFragment</code></a>
called <code>buttons</code>. Loosely speaking, this is an object that can be used to
collect a bunch of stuff that will be added to a page. When creating many new
elements on a page it is prudent to add them to a <code>DocumentFragment</code> first, and
only then add it to the page. That way they will all appear on the page at
roughly the same time, and the user will not see new elements appear on the page
one after the other.</p>
<p>The next part of the function iterates through every ward. First, it extracts
the <code>id</code> and <code>name</code> fields. Then, it creates a new <code>&lt;button&gt;</code>, and sets its text
to be the name of the ward. When each of these buttons is clicked, the function
returned by the call to <code>displayData</code> will be run. Each new button is then added
to the <code>DocumentFragment</code> using the
<a href="https://developer.mozilla.org/en-US/docs/Web/API/Node/appendChild"><code>appendChild</code></a>
function.</p>
<p>Finally, the <code>&lt;nav&gt;</code> is obtained by using its ID. Its contents are deleted, and
replaced by the <code>DocumentFragment</code> containing all these new buttons, by using
the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/append">append</a>
function.</p>
<p>In short, this is the bit of code that creates the buttons on the navigation
section on the left!</p>
<div class="advanced container">
<header><span class="advanced-title"></span></header>
<div class="container-content">
<p>Of course, someone could argue that the wards of Bristol do not change very
often, and that as a consequence it is slow and wasteful to perform an HTTP
request to obtain a list of wards; it would be much better to simply hard-code
these buttons and their names into the app. This developer could well be right.</p>
</div>
</div>
<p><em>Exercises.</em></p>
<ol>
<li>Modify the code above so that each button is on a separate line.</li>
<li>Modify the code above so that buttons appear in alphabetical order.</li>
<li>The line
<pre><code class="language-javascript">b.onclick = displayData(id, name);
</code></pre>
sets a button's <a href="https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onclick"><code>onclick</code></a>property to be a newly-created function. Sometimes
this is undesirable. For example, if another script had already added some
code for what should happen when a button is clicked, this would completely
replace it. Change this line so that it instead adds an
<a href="https://developer.mozilla.org/en-US/docs/Web/API/EventListener"><code>EventListener</code></a>
to <code>b</code>, so that it simply adds functionality, without interfering with other
code.</li>
</ol>
<p>[<em>Hint.</em> Exercises 1 and 2 can be completed by adding one line of code for each.
For the second one, use <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort"><code>Array.sort</code></a>].</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="dynamic-structure-part-2"><a class="header" href="#dynamic-structure-part-2">Dynamic structure, part 2</a></h2>
<p>The rest of <code>script.js</code> is concerned with displaying data about a given ward in
the <code>&lt;main&gt;</code> section of the page. In fact, it consists of just one function,
called <code>displayData</code>. Let us look at its structure, whilst eliding some of its
implementation details:</p>
<pre><code class="language-javascript">function displayData(id, name) {
  
  function buildPopulation(records) {
    ...
  }

  return function () {
    ...
  }
}
</code></pre>
<p>When called with two arguments <code>id</code> and <code>name</code>, the function <code>displayData</code> does two things:</p>
<ol>
<li>It defines a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Functions#nested_functions_and_closures">nested
function</a>
called <code>buildPopulation</code>. This is a function whose definition is <em>local</em> to
<code>displayData</code>: it can only be used within its body, but not in the rest of
the program. However, this function is allowed to refer to the arguments of
its enclosing function (i.e. <code>id</code> and <code>name</code>). We sometimes call this an <em>auxiliary function</em>, or a
<em>helper function</em>.</li>
<li>It returns an anonymous <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Functions#arrow_functions">arrow
function</a>.
Thus, <code>displayData</code> will return... a newly defined, anonymous function!
Recall that in the previous part of the script, <code>displayData</code> was used only
in one line, namely
<pre><code class="language-javascript">   b.onclick = displayData(id, name);
</code></pre>
<code>b</code> is a button, and its <code>onclick</code> property is a function that will be run
when it is clicked. Thus, <code>displayData</code> should return a function. To
construct such a function we need to know the <code>id</code> and <code>name</code> of the ward
whose data is to be displayed, so <code>displayData</code> needs to take them as
parameters.</li>
</ol>
<p>Both of these constitute examples of functional programming in action.</p>
<p>Let us now look in more detail in the function that is returned:</p>
<pre><code class="language-javascript">function displayData(id, name) {
  
  function buildPopulation(records) {
    ...
  }

  return function () {
    let wards = fetch(`https://opendata.bristol.gov.uk/api/v2/catalog/datasets/population-estimates-time-series-ward/records?limit=20&amp;select=mid_year,population_estimate&amp;refine=ward_2016_code:${id}`)
      .then(response =&gt; response.json())
      .then(data =&gt; {
        let heading = document.createElement('h1');
        heading.innerText = name;
        
        let population = buildPopulation(data.records);

        let dataPane = document.getElementById("dataPane");
        dataPane.textContent = '';
        dataPane.append(heading, population);
      })
      .catch(err =&gt; console.log(err));
  }
}
</code></pre>
<p>The pattern here is much the same as before: an HTTP request is made, its response is parsed as JSON, and then processed.</p>
<p>The endpoint is determined as before, but now asks for data from the
<a href="https://opendata.bristol.gov.uk/explore/dataset/population-estimates-time-series-ward/information/?disjunctive.ward_2016_name"><code>population-estimates-time-series-ward</code></a>
dataset, which contains estimates of the population that lives in each Bristol
ward. We extract only the <code>mid_year</code> and <code>population_estimate</code> fields, which
contain the year in the middle of which the population is estimated, and the
actual estimate itself. We also use a new feature of the API, namely the
<code>refine</code> query parameter. This allows us to extract only records one of whose
<em>facets</em> (i.e. fields of data) has a particular value. At this point in our
code, we know the variable <code>id</code> holds the ID of the ward whose population we
want to display, say <code>E05010914</code> for Southville. By peeking in some sample data,
we can work out that if we pass the query parameter</p>
<pre><code>refine=ward_2016_code:E05010914
</code></pre>
<p>we will only retrieve the population estimates for Southville.</p>
<p>The value <code>E050109141</code> is presumably stored in the <code>id</code> argument. However, <code>id</code>
is a variable in our JavaScript program, so it needs to be turned into a string,
which can then be spliced into the URL at the right position. Fortunately,
modern versions of JavaScript provide a neat way of doing this, namely <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals">template
literals</a>.
Instead of enclosing the URL string in single quotes as before, we now enclose
it in backticks. Then, we can use any JavaScript expression <code>e</code> that evaluates
to a string by writing <code>${e}</code> directly in the URL string. Thus,</p>
<pre><code class="language-javascript">`https://opendata.bristol.gov.uk/api/v2/catalog/datasets/population-estimates-time-series-ward/records?limit=20&amp;select=mid_year,population_estimate&amp;refine=ward_2016_code:${id}`
</code></pre>
<p>evaluates to the correct string at runtime.</p>
<p>The rest of the function is unremarkable. It creates an <code>&lt;h1&gt;</code> heading
containing the name of the ward. Then, it calls the local function
<code>buildPopulation</code>, passing the records in the data returned by the HTTP request.
The <code>&lt;main&gt;</code> tag is retrieved through its unique ID, its contents are erased,
and replaced by the heading and whatever was returned by <code>buildPopulation</code>.</p>
<p>A version of this function is run every time someone clicks a ward button.</p>
<h3 id="generating-tables"><a class="header" href="#generating-tables">Generating tables</a></h3>
<p>The rest of the application is contained in the auxiliary <code>buildPopulation</code> function:</p>
<pre><code class="language-javascript">  function buildPopulation(records) {

    // Make heading
    let heading = document.createElement('h2');
    heading.innerText = 'Population';

    // Make table
    let table = document.createElement('table');
    table.setAttribute('id','populationTable');

    // Make table header
    let header = document.createElement('tr');
    header.innerHTML = '&lt;th&gt;Year&lt;/th&gt;&lt;th&gt;Population&lt;/th&gt;&lt;/tr&gt;';
    table.appendChild(header);
    
    // Populate table
    records.sort((x1, x2) =&gt; x1.record.fields.mid_year &lt; x2.record.fields.mid_year ? -1 : 1)
      .forEach(r =&gt; {
        let year = document.createElement('td');
        year.innerText = r.record.fields.mid_year;
        let population = document.createElement('td');
        population.innerText = r.record.fields.population_estimate;

        let row = document.createElement('tr');
        row.append(year, population);
        table.appendChild(row);
    });
    
    let population = new DocumentFragment();
    population.append(heading, table);
    
    return population;
  }
</code></pre>
<p>Upon receiving an array <code>records</code>, this function sets out to build a new
<code>&lt;table&gt;</code> with two columns, Year and Population. After building its header, it
sorts the records by year. This is achieved through the build-in
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort"><code>sort</code></a>
function, which takes a higher-order argument that decides which of two records
comes first. It has a funny interface: negative numbers signify that the first
argument comes before the second, and positive arguments the opposite.</p>
<p>The program then iterates through the records, and makes a row <code>&lt;tr&gt;</code> for each
data point. Finally, it assembles this data into a table, prepends an <code>&lt;h2&gt;</code>
heading, and returns a <code>DocumentFragment</code> consisting of the heading and the
table.</p>
<p>Thus, this part of the application is responsible for retrieving and presenting
the requested data.</p>
<h3 id="exercises-7"><a class="header" href="#exercises-7">Exercises</a></h3>
<p><em>Exercise (easy)</em>. Make the app present only population estimates after the year
2015.</p>
<p>This may be achieved in two ways:</p>
<ul>
<li>by changing the REST API call; or</li>
<li>by processing the data after it has been fetched.</li>
</ul>
<p>The second one is significantly easier.</p>
<p>[Hint: Moreover, the second one can be achieved with one line of code if you use
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter">Array.filter</a>.]</p>
<p><em>Exercise</em>. Expand this application so it also presents an estimate of life
expectancy for each ward. I recommend that you define an auxiliary function</p>
<pre><code class="language-javascript">  function buildLifeExpectancy(records) {
    ...
  }
</code></pre>
<p>which, given the data, builds the necessary HTML elements - as above.</p>
<p>You will also face another problem, which is that you will need to use data from
two HTTP requests. The obvious way to do this is to nest two fetch calls:</p>
<pre><code class="language-javascript">fetch('first-URL')
  .then(response =&gt; response.json())
  .then(data1 =&gt;
    fetch('second-URL')
      .then(response =&gt; response.json())
      .then(data2 =&gt; {
        // ... here you can use both data1 and data2 ...
      });
  );
</code></pre>
<p>However, recent versions of JavaScript provide a neater way of doing this,
namely
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all"><code>Promise.all</code></a>.
This function accepts an array of promises, and returns a single 'composite'
promise. When all the premises in the array are resolved, it passes an array of
the returned values to its <code>then()</code> clause. In this particular instance, you
could do something like</p>
<pre><code class="language-javascript">Promise.all([fetch('first-URL'), fetch('second-URL')])
  .then([response1, response2] =&gt; Promise.all([response1.json(), response2.json()]))
  .then([data1, data2] =&gt; {
    // ... here you can use both data1 and data2 ...
  });
</code></pre>
<p>or, in a more succinct style:</p>
<pre><code class="language-javascript">Promise.all([fetch('first-URL'), fetch('second-URL')])
  .then(responses =&gt; Promise.all(responses.map(r =&gt; r.json())))
  .then([data1, data2] =&gt; {
    // ... here you can use both data1 and data2 ...
  });
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="simplifying-your-code"><a class="header" href="#simplifying-your-code">Simplifying your code</a></h2>
<p>If you have changed the app so that it displays life expectancy as well, you
will notice that you have amassed a formidable amount of code. For example, my
solution runs to 116 lines - all to achieve something that is essentially
simple.</p>
<p>For example, to create the population data table we wrote the following code:</p>
<pre><code class="language-javascript">let year = document.createElement('td');
year.textContent = r.record.fields.mid_year;

let population = document.createElement('td');
population.textContent = r.record.fields.population_estimate;

let row = document.createElement('tr');
row.append(year, population);
table.appendChild(row);
</code></pre>
<p>Staring at this code, certain patterns become evident: every time we want to
create a new HTML tag, we must:</p>
<ol>
<li>create the HTML element,</li>
<li>set its <code>textContent</code> (or <code>innerHTML</code> elsewhere), and</li>
<li>assemble things hierarchically (in rows, tables, etc.)</li>
</ol>
<p>This pattern occupies the majority of our code. It is an artifact of the way the
DOM API is designed. For example, it would be preferable if we had a constructor
<code>document.createElementWithText(tag, text)</code> which allowed to construct a new
element of the DOM, and immediately initialize it with some text.</p>
<p>Luckily, JavaScript is a particularly expressive language, and such an interface
can be defined:</p>
<pre><code class="language-javascript">function createElementText(tag, text) {
  let elem = document.createElement(tag);
  elem.textContent = text;
  return elem;
}
</code></pre>
<p>This small function performs steps 1 and 2, and then returns the new element.</p>
<p>To deal with 3, i.e. the hierarchical assembly of elements, we can define a function</p>
<pre><code class="language-javascript">function createElementWith(tag, xs) {
  let elem = document.createElement(tag);
  for (const x of xs) {
    elem.appendChild(x);
  }
  return elem;
}
</code></pre>
<p>This function takes the name of a tag, and an array <code>xs</code> of elements. It then
creates a new element with this tag, and appends everything in <code>xs</code> as children
of this new element. Finally, it returns the newly constructed element.</p>
<p>These functions allow us to create new elements of the DOM in a more functional
style. For example, an array containing the rows of the population table can be
created using the following code fragment:</p>
<pre><code class="language-javascript">  records.filter(d =&gt; d.record.fields.mid_year &gt;= 2015)
    .sort((x1, x2) =&gt; x1.record.fields.mid_year &lt; x2.record.fields.mid_year ? -1 : 1)
    .map(r =&gt;
      createElementWith('tr', [
        createElementText('td', r.record.fields.mid_year),
        createElementText('td', r.record.fields.population_estimate)
      ])
</code></pre>
<p>The expressions in the body correspond to the actual tree structure of the row.
As a result, they are much more readable.</p>
<p><em>Exercise</em>. Rewrite the application using the functions defined above (and
similar ones). Try to make it as succinct and readable as possible.</p>
<p>For example, my version of the complete application (with life expectancy) runs
to 114 lines, and that is without making much of an effort to be succint. This
is only 2 lines shorter than my previous version, but one must remember that
about 20 of these lines are the new functions, and we could factor these out in
a separate JavaScript
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules">module</a>.
This amounts to a 19% reduction in the amount of code - which can be rather
significant in larger projects.</p>
<p>Of course, larger projects are likely to use frameworks like React to build such
applications, whose use of JSX and <a href="https://www.robinwieruch.de/react-function-component/">function
components</a> deal with
exactly this sort of problem.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="react"><a class="header" href="#react">React</a></h1>
<p><a href="https://react.dev">React</a> is a JavaScript web development framework built by Facebook.</p>
<h2 id="videos-5"><a class="header" href="#videos-5">Videos</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Video</th><th style="text-align: right">Length</th><th>Slides</th></tr></thead><tbody>
<tr><td><a href="https://web.microsoftstream.com/video/7eb8b3a3-f9c6-496d-9cca-537574f24288">React</a></td><td style="text-align: right">14 minutes</td><td><a href="https://uob-my.sharepoint.com/:b:/g/personal/me17847_bristol_ac_uk/EVqs65v78RdOuGe-i3WW_NEB2hZdIaq-cTY0KKyYANUo7g?e=C1FoyK">slides</a></td></tr>
<tr><td><a href="https://web.microsoftstream.com/video/521dbfc2-0bd1-4f9a-ab90-a3223bdac16b">React Part II</a></td><td style="text-align: right">9 minutes</td><td><a href="https://uob-my.sharepoint.com/:b:/g/personal/me17847_bristol_ac_uk/EUjed5sNPf9AjK26Bxp1wV8BvV67Sdyb6ZYFPQgrgzaiuQ?e=KZJ9MX">slides</a></td></tr>
<tr><td><a href="https://web.microsoftstream.com/video/7a0187b9-a6c7-4515-a08d-e6e24d3bc0c6">React Part III</a></td><td style="text-align: right">9 minutes</td><td><a href="https://uob-my.sharepoint.com/:b:/g/personal/me17847_bristol_ac_uk/EV0TcUaEn61IpkdWjDJ5wq4Bx6V83oCGOh8ZfoLGo339Ew?e=XK7Ba8">slides</a></td></tr>
</tbody></table>
</div>
<h2 id="readings-1"><a class="header" href="#readings-1">Readings</a></h2>
<p>The main reading is the <a href="https://react.dev/learn">official React guide</a>.</p>
<h2 id="exercises-8"><a class="header" href="#exercises-8">Exercises</a></h2>
<ul>
<li><a href="react/./installing.html">Installing React</a></li>
<li><a href="react/./hello.html">Hello World in React</a></li>
<li><a href="react/./character.html">Character Design</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="installing-react"><a class="header" href="#installing-react">Installing React</a></h1>
<h2 id="nodejs-and-npm"><a class="header" href="#nodejs-and-npm">Nodejs and NPM</a></h2>
<p>JavaScript's original selling point was that it runs in the browser. <a href="https://nodejs.org">NodeJS</a> is a JavaScript runtime without a browser, so you can for example write a server / back-end in JavaScript too. Using a library called <a href="https://electronjs.org">Electron</a>, you can even write desktop apps in JavaScript/NodeJS (Electron is essentially google's Chrome browser without the branding, so you can use it to build your own user interface.) We will need NodeJS to run React, which compiles JSX code into JavaScript and HTML.</p>
<p>NodeJS comes with its own package manager, NPM (NodeJS Package Manager). The shell command to run it is <code>npm</code>, but there is also <code>npx</code> which downloads the latest version of a package and immediately runs it, if it contains a command-line tool.</p>
<ul>
<li>Install NodeJS for your operating system. On alpine, use <code>sudo apk add nodejs npm</code>; for other operating systems you can download it from <a href="https://nodejs.org/en/">nodejs.org</a> or use your system's package manager, if available.</li>
</ul>
<h2 id="your-first-react-app"><a class="header" href="#your-first-react-app">Your first React app</a></h2>
<ul>
<li>Create a new react app with <code>npx create-react-app FOLDERNAME</code>. You cannot call the folder <code>react</code> itself, so please choose a different name. Downloading and preparing everything for the first time might take a while.</li>
<li>By default, react uses port 3000 for its server. If you want another port, like 8000, edit <code>package.json</code> and edit the line</li>
</ul>
<pre><code>"start": "react-scripts start",`
</code></pre>
<p>to read as follows</p>
<pre><code>"start": "PORT=8000 react-scripts start",
</code></pre>
<ul>
<li>Start the react app with <code>npm start</code> inside the folder with the <code>package.json</code> and open your browser on <code>localhost:8000</code> or whichever port you are using (the default is 3000). You should see a message "Edit <code>src/App.js</code> and save to reload." in your browser.</li>
</ul>
<h2 id="explore-the-code"><a class="header" href="#explore-the-code">Explore the Code</a></h2>
<p>Have a look at the structure of the project files:</p>
<ul>
<li><code>package.json</code> is the configuration file (like the <code>pom.xml</code> for Java/maven).</li>
<li>The page being served is <code>public/index.html</code> although the server replaces <code>%PUBLIC_URL%</code> itself (in development this just becomes the empty string). Note the contents of the page are essentially <code>&lt;div id="root"&gt;&lt;/div&gt;</code>, but if you look at the source in the browser (Control+U) you will see that react has added a line at the end of the body pulling in the JavaScript files. If you look with the developer tools (F12) you will see that the content of the app has been added as a child of the root div.</li>
<li>The code lives in <code>src/</code>, mainly in <code>src/App.js</code>. The default code uses a function style component rather than a class style one, but the elements you see in the JSX code here (the HTML-embedded-in-JavaScript) are the ones that you saw in your browser inside the root div.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="hello-world-in-react"><a class="header" href="#hello-world-in-react">Hello World in React</a></h1>
<p>In this exercise we will build a simple React app that greets the user, and so demonstrates managing state and passing it between components.</p>
<p>Create a react app folder with <code>npx create-react-app FOLDERNAME</code>. Edit the port if necessary, as described on the previous page.</p>
<p>You can start the development server (<code>npm start</code>) and it will automatically reload when it detects that you have edited a source file. This feature can be quite convenient to develop with.</p>
<p>We will create an app with three components:</p>
<ul>
<li>The app component manages some state, namely a person's name.</li>
<li>The input component lets you enter and change your name.</li>
<li>The output compoment displays "Hello, NAME".</li>
</ul>
<h2 id="a-basic-app"><a class="header" href="#a-basic-app">A basic app</a></h2>
<p>First, strip out the sample code so your <code>App.js</code> file looks like this:</p>
<pre><code class="language-js">import './App.css';
import React from 'react';

class App extends React.Component {
  render() {
    return (
      &lt;p&gt;App&lt;/p&gt;
    )
  }
}

export default App;
</code></pre>
<p>Save the file - if the <code>npm run</code> server is running in another window, it will reload - and check that you get a page with just the text <code>App</code>.</p>
<h2 id="add-some-state"><a class="header" href="#add-some-state">Add some state</a></h2>
<p>In the app class, we can add some state such as a name field:</p>
<pre><code class="language-js">import './App.css';
import React from 'react';

class App extends React.Component {
  state = {
    name: 'David'
  }

  render() {
    return (
      &lt;p&gt;Hello, {this.state.name}!&lt;/p&gt;
    )
  }
}

export default App;
</code></pre>
<p>Check that this now displays <code>Hello, David!</code>.</p>
<h2 id="pass-state-between-components"><a class="header" href="#pass-state-between-components">Pass state between Components</a></h2>
<p>Let's make a separate component to display the name - add this class before the <code>export default</code> line:</p>
<pre><code class="language-js">class NameGreeter extends React.Component {
  render() {
    if (this.props.name === "") {
      return (
        &lt;p&gt;Hello!&lt;/p&gt;
      )
    } else {
      return (
        &lt;p&gt;Hello, {this.props.name}!&lt;/p&gt;
      )
    }
  }
}
</code></pre>
<p>This component expects one property (the react version of a "parameter") called <code>name</code> and displays either a generic greeting or a greeting with a name.</p>
<p>Change the render method for the App class to this:</p>
<pre><code class="language-js">render() {
  return (
    &lt;NameGreeter name={this.state.name} /&gt;
  )
}
</code></pre>
<p>This tells react that when it's time to render the App, it should create a <code>NameGreeter</code> component and pass it one prop called <code>name</code> which has the value of the name in the current state.</p>
<p>Note how we refer to <code>this.state.name</code> in the component that owns the state, but <code>this.props.name</code> in the child component. Generally, <code>this.state</code> is a component's own state and <code>this.props</code> is state (or other things) that a component gets from its parent.</p>
<p>You could try making more than one name greeter, but a JSX block must always have a single root tag so this won't work:</p>
<pre><code class="language-js">// don't do this
return (
  &lt;NameGreeter name={this.state.name} /&gt;
  &lt;NameGreeter name={this.state.name} /&gt;
)
</code></pre>
<p>But this is fine:</p>
<pre><code class="language-js">return (
  &lt;div&gt;
    &lt;NameGreeter name={this.state.name} /&gt;
    &lt;NameGreeter name={this.state.name} /&gt;
  &lt;/div&gt;
)
</code></pre>
<h2 id="change-state"><a class="header" href="#change-state">Change State</a></h2>
<p>We are going to make a <code>NameEditor</code> component with an input field to change the name.
However, the name <em>belongs</em> to the app component: this is the <em>state lifting</em> pattern in React, where if more than one component wants to 'share' some state, then you make a common parent component to hold the state. Any changing of the state has to happen on the parent component that 'owns' it, so we have to create functions to pass it around correctly.</p>
<p>First, create a new component like this:</p>
<pre><code class="language-js">class NameEditor extends React.Component {
  render() {
    return (
      &lt;p&gt;
        &lt;label for="name"&gt;Name: &lt;/label&gt;
        &lt;input type="text" id="name" value={this.props.name} /&gt;
      &lt;/p&gt;
    )
  }
}
</code></pre>
<p>And change the render method of the <code>App</code> component to create a name editor:</p>
<pre><code class="language-js">return (
  &lt;div&gt;
    &lt;NameEditor name={this.state.name} /&gt;
    &lt;NameGreeter name={this.state.name} /&gt;
  &lt;/div&gt;
)
</code></pre>
<p>When you run this, it will show you an input box with the current name, but if you try and change it then React will change it straight back again.</p>
<p>Input and output in React works with <em>data binding</em>: react maintains the correspondence between items on the screen (such as the input field) and its own state, but by default this only works in one way: React makes sure that the components on the screen reflect React's own state.</p>
<p>To make the edit box work, we have to first create a function on the <code>App</code> component that allows the state to be updated:</p>
<pre><code class="language-js">class App extends React.Component {
  constructor() {
    super();
    this.onNameChange = this.onNameChange.bind(this);
  }

  onNameChange(newName) {
        this.setState({name: newName})
  }

  // state and render method here, same as before
}
</code></pre>
<p>The real work is happening in <code>this.setState</code>, we can't just do <code>this.state.name = newName</code> as that would not trigger React's updates. The <code>setState</code> function which is part of React, apart from setting the new state, also re-renders any component that needs to update itself.</p>
<p>The constructor is just boilerplate code to correctly re-bind the <code>this</code> variable for <code>onNameChange</code>, you have to do this for every method you write in a React class. You also need to call the <code>super()</code> constructor explicitly at the start of the constructor, as this calls the <code>React.Component</code> constructor to set the component up correctly.</p>
<p>We also have to let the name editor know which function to call to process changes. Change the JSX line that creates it to</p>
<pre><code class="language-html">&lt;NameEditor name={this.state.name} onNameChange={this.onNameChange} /&gt;
</code></pre>
<p>We did not put brackets after the function name, as we don't want to call the function when the component is created or rendered, we just want to tell it "here's a function that you can call later when you need it".</p>
<p>Next, in the <code>NameEditor</code> class, we create a method to handle updates:</p>
<pre><code class="language-js">constructor(props) {
  super(props);
  this.onNameChange = this.onNameChange.bind(this);
}

onNameChange(e) {
  this.props.onNameChange(e.target.value);
}
</code></pre>
<p>If our component takes props, then we should pass them to the super constructor too.</p>
<p>The parameter <code>e</code> is an element of type event, which is triggered by the input component when the user changes its value. The event class has a property <code>target</code> which refers to the element on the page that triggered it, and if that was an input box like it is here then we can read its <code>value</code>. This is what we pass, via <code>props</code>, back to the <code>App</code> component.</p>
<p>Finally, change the line that creates the input box to</p>
<pre><code class="language-html">&lt;input type="text" id="name" value={this.props.name} onChange={this.onNameChange} /&gt;
</code></pre>
<p>The <code>onChange</code> attribute of an <code>&lt;input&gt;</code> is defined in the HTML standard and takes a JavaScript function that should be called whenever the input value changes.</p>
<p>With all this in place, you should be able to run the app and edit the text box, and watch the greeting change as you do this.</p>
<h2 id="sequence-of-events"><a class="header" href="#sequence-of-events">Sequence of Events</a></h2>
<p>Make sure you understand what happens when you type in the input box. You can observe this yourself if you set breakpoints in the F12 debug tools:</p>
<ol>
<li>You type in the input box.</li>
<li>The browser reacts by calling the input box's <code>onChange</code> function with one parameter, an <code>Event</code>. This function is <code>NameEditor.onNameChange</code>.</li>
<li>Your <code>NameEditor.onNameChange</code> calls <code>App.onNameChange</code>.</li>
<li><code>App.onNameChange</code> calls React's <code>setState</code>.</li>
<li>In response to this, React calls <code>render()</code> on the <code>App</code>.</li>
<li>This triggers further <code>render()</code> calls in both <code>NameGreeter</code> and <code>NameEditor</code>.</li>
</ol>
<h2 id="build-the-app"><a class="header" href="#build-the-app">Build the app</a></h2>
<p>When you have finished developing an app, run <code>npm run build</code>. This will create your app in <code>build/</code>, compiling the JSX to JavaScript and HTML files. You can open <code>build/index.html</code> in a web browser without a server running.</p>
<h2 id="read-all-about-it"><a class="header" href="#read-all-about-it">Read all about it</a></h2>
<p>We have essentially, with a different example, done step 10 of the <a href="https://reactjs.org/docs/lifting-state-up.html">official React tutorial</a>. After the workshop, you may want to read this page again.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="character-design-exercise"><a class="header" href="#character-design-exercise">Character design exercise</a></h1>
<p>The final React exercise today is to write a "character design" React app. Functionality is your first priority, before design: it's ok to lay out everything in simple paragraphs one above the other.</p>
<p>The constraints are:</p>
<ul>
<li>There are four stats, called <em>Charisma, Prowess, Agility</em> and <em>Strength</em>.</li>
<li>You have 4 stat points to spend in total, but you may not spend more than 2 points on the same stat.</li>
<li>You should make a reusable "stat editor" component that displays the points allocated to a stat and has +/- buttons to change these, and displays the name of the stat.</li>
<li>The buttons must be enabled when you are allowed to increase/decrease the stat in question, and disabled otherwise.</li>
<li>You should also make a separate component that displays the number of stat points remaining to spend (this was not in the example in the lectures).</li>
</ul>
<p>You can ignore the character's name for now.</p>
<p>The design question here is where to put the functions that access or manipulate state. For example you will probably want a function somewhere that returns the number of stat points remaining to spend.</p>
<p>You will also need to think about how you can make a <em>reusable</em> stat editor component, so that you can include it four times in the app's render method. The design question here is which props you pass to the component - each of the four copies of the stat editor will need a different value for at least one of the props. The solution shown in the lectures is just one of many possibilities.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="web-scraping"><a class="header" href="#web-scraping">Web Scraping</a></h1>
<h2 id="videos-6"><a class="header" href="#videos-6">Videos</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Video</th><th style="text-align: right">Length</th><th>Slides</th></tr></thead><tbody>
<tr><td><a href="https://web.microsoftstream.com/video/9ceda4de-3749-4d9e-ad2c-3def7cd0c7d0">Crawling</a></td><td style="text-align: right">16 minutes</td><td><a href="https://uob-my.sharepoint.com/:b:/g/personal/me17847_bristol_ac_uk/ESBfwTJqSNVDqEcdFdCaJLcBxKWpKIh63teq3unGb3zgwg?e=BDIm6Q">slides</a></td></tr>
<tr><td><a href="https://web.microsoftstream.com/video/4af3499f-3198-4d5e-8ff8-b0835a8721cd">BeautifulSoup</a></td><td style="text-align: right">10 minutes</td><td><a href="https://uob-my.sharepoint.com/:b:/g/personal/me17847_bristol_ac_uk/EU9FDAcFSLNHlp1qVuIa7NkBE6fsQ8xSWcaZpWyXlDRgOg?e=NqDC2z">slides</a></td></tr>
</tbody></table>
</div>
<h2 id="exercises-9"><a class="header" href="#exercises-9">Exercises</a></h2>
<ul>
<li><a href="scrape/./crawl.html">Crawling</a></li>
<li><a href="scrape/./soup.html">BeautifulSoup</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="crawling-the-web"><a class="header" href="#crawling-the-web">Crawling the Web</a></h1>
<p>So far in this unit we've had you use <code>wget</code> only for one of its simplest
use-cases: when you want to download a single file from the web. Consistent with
the Unix philosophy that tools should 'do one thing well', <code>wget</code> is capable of
a lot more than this.</p>
<p>To demonstrate this, we're going to have you first run a server to deploy a
website locally, and then test out various <code>wget</code> options by connecting to that
server via localhost. This of course doesn't mean that <code>wget</code> can only do these
things via localhost -- it's designed to work with real websites -- but we
decided that getting ~200 students to test out web-crawling on a particular live
website was probably not a great idea, so we're having each of you run your own.</p>
<h3 id="set-up-the-server"><a class="header" href="#set-up-the-server">Set up the server</a></h3>
<p>As with the HTTP exercises, it would be best to either carry out these steps directly on a lab machine
or on your own machine (optionally from the Debian Linux VM with ports forwarded). If you are using
a lab machine via SSH instead then you'll need to open a second SSH session <em>to the same lab machine</em>
in another terminal, to act as a client for the next parts of the exercise.
However, we'll periodically invite you to check things in your browser, which is
a lot simpler if you're not trying to use a remote machine.</p>
<p>First, download the <a href="scrape/../resources/cattax.tar.gz">webpages to be served by the webserver</a>.
If you like you can even do this using <code>wget</code>:</p>
<pre><code class="language-bash">wget https://cs-uob.github.io/COMSM0085/exercises/part2/resources/cattax.tar.gz
</code></pre>
<p>Then extract the contents of the tarball using <code>tar -xzf cattax.tar.gz</code> in the
folder you downloaded it to. This will create a folder <code>cattax</code> which contains some
webpages and resources.</p>
<p>Next, use the <code>darkhttpd</code> server from a previous week's exercises to
serve the content of the <code>cattax</code> folder on <code>localhost:8080</code>. <em>(Refer to the
HTTP week's exercise instructions if you have forgotten how to do this)</em>.</p>
<p>You can check that this is working in a browser (unless you are connecting via
SSH) by navigating to <code>localhost:8080/index.html</code> -- you should see a webpage
talking about <strong>Felidae</strong>. You'll need to leave this server running -- the
simplest way forward would be to open another terminal for the steps below.
<em>(Alternatively: use your shell expertise to figure out how to run the server in
the background without its output interfering with the rest of what you're going
to be doing in this terminal).</em></p>
<h3 id="single-page-download"><a class="header" href="#single-page-download">Single-page download</a></h3>
<p>To keep your filesystem tidy, we're going to work within a 'client' folder.
We'll be repeatedly downloading files and sometimes deleting them, and you'll
neither want lots of duplicated webpages littering your filesystem nor want to
run <code>rm *</code> in a directory that possibly contains files you don't want deleted.</p>
<p>Make sure you are in the parent directory that contains <code>cattax</code> (i.e., you can
type <code>ls</code> and see the directory <code>cattax</code> in the output) and <em>not inside</em>
<code>cattax</code> itself. Then create a directory and move into it:</p>
<pre><code class="language-bash">mkdir client
cd client
</code></pre>
<p>Now we'll start with the simple use of <code>wget</code> you have already become familiar
with:</p>
<pre><code>wget localhost:8080/index.html
</code></pre>
<p>This downloads the same <code>index.html</code> as is being served from <code>cattax</code> by
<code>darkhttpd</code>. However, if you open this downloaded file in your browser, you'll
see that there's a sense in which something missing -- <code>wget</code> has only
downloaded the specific HTML file you requested, and not any of the resources
that the page itself references, like the CSS file -- so the version you open in
your browser from your <code>client</code> directory won't look the same as the version
being served via localhost. This can be desirable default behaviour (we only
asked it to get that page, after all), but if we wanted to download a copy of a
webpage and later read that webpage's copy with the styles and images it was
originally created to contain, we'd need to get <code>wget</code> to also download these
resources.</p>
<p>One way to do this would be to manually identify each of the required resources
and download them one-by-one. But this is tedious, repetitive work -- highly
suited to automation -- and moreover, <code>wget</code> can save us the effort. Try the
following, and <strong>read the output</strong>.</p>
<pre><code>wget -p localhost:8080/index.html
</code></pre>
<p>Notice that this time <code>wget</code> downloaded multiple files. It also created a
directory named <code>localhost:8080</code> to store all the files in. This is helpful
organisation if you're ever using <code>wget</code> to download pages from multiple
different websites -- it stores them under directories named after the domain
you requested them from.</p>
<p>If you read the output carefully you'll notice that as well as the <code>index.html</code>
we requested directly, <code>wget</code> has also downloaded the <code>catstyle.css</code> file
referenced in that page, and another file called <code>robots.txt</code> that you didn't
ask for and which isn't mentioned in <code>index.html</code>. This 'robots' file is part of
a standard for responsible web crawling, and tells crawling tools which parts of
a website they are or aren't allowed to visit. When you use <code>wget</code> to crawl a
webpage or website it will check the site's <code>robots.txt</code> to understand which
resources it may not be allowed to download. You can read more about how these
files are written
<a href="https://developers.google.com/search/docs/crawling-indexing/robots/robots_txt">here</a>.</p>
<p>Open the <code>index.html</code> file from the new <code>localhost:8080</code> folder that was
created, and you should see that it looks just like the version you got in your
browser by navigating to the URI <code>localhost:8080/index.html</code>. <em>(There are some
cases where this wouldn't be true for a webpage -- wget can sometimes not be
permitted access to some resources required to display a page the same way as it
is shown in your browser).</em></p>
<h3 id="crawling-a-site"><a class="header" href="#crawling-a-site">Crawling a site</a></h3>
<p>The version of the webpage you downloaded using the previous command still has
one major flaw: the links on the page don't work. Or, rather, the links to the
'Felinae' and 'Pantherinae' pages are broken, because those links are made
relative to the webpage, and the corresponding files don't exist in the client's
folder.  The link to Wikipedia in the page footer <em>does</em> still work, because the
<code>href</code> attribute of that link is set to a full URI.</p>
<p>What do we do if we want to download more than one webpage from a site? Wget
supports something called 'recursive downloading'. Simply put, when used in this
manner it will follow all links internal to a site and download the resources
displayed at those links, storing a copy locally and creating a directory
structure if necessary. One version of this recursion is to use the <code>-r</code> (or
<code>--recursive</code>) option, which downloads all linked pages up to a certain maximum
depth. Try this out:</p>
<pre><code>wget -r -l 1 localhost:8080/index.html
</code></pre>
<p>This downloads recursively with the 'level' (maximum depth of recursion) set to
1 level of recursion. You should see that both the requested <code>index.html</code> and
the two pages linked from that resource have been downloaded, along with
<code>robots.txt</code>. Notice as well that the Wikipedia page has not been downloaded --
it's not hosted at <code>localhost:8080</code>, so <code>wget</code> ignores it, and the link will
work from the downloaded page anyway.  Our two newly-downloaded pages, however,
will contain dead links to other pages, because we limited the depth of
recursion to just one hop.  If we increase this:</p>
<pre><code>wget -r -l 2 localhost:8080/index.html
</code></pre>
<p>You'll see that a <em>lot</em> more files get downloaded. These are only very small,
simple web-pages, without many links (contrast, for example, any given Wikipedia
page). Very short recursion depths can capture an awful lot of a domain, and if
you ever tell <code>wget</code> to crawl links without caring about which domain they
belong to, this becomes explosively worse (<code>-l 2</code> in such a case for our
<code>index.html</code> would involve
downloading everything linked from the Wikipedia page referenced in the footer
-- several hundred resources).  In the case of our cattax website, however,
there are still a few pages that are more than 2 steps away from the index page.
Let's start afresh:</p>
<pre><code>rm -r localhost:8080
wget -m localhost:8080/index.html
</code></pre>
<p>The <code>-m</code> flag is designed to provide some sensible defaults for 'mirroring' an
entire website (something you might do if you wanted to keep a copy of it for
offline browsing, or for providing a public backup of a valuable resource). It
sets the recursion level to infinite and checks timestamps before downloading
files, as well as setting a few more configuration settings. For many cases
where you might want to download an entire website, this is the flag you would use --
perhaps also with a polite <code>-w 1</code>, which sets a 1-second delay between requests,
to avoid over-burdening the server if the website is large.</p>
<h2 id="further-exercises"><a class="header" href="#further-exercises">Further Exercises</a></h2>
<ol>
<li>Read <code>man wget</code> to understand what the <code>-i</code> <code>--force-html</code> and <code>--spider</code>
options do. Download a copy of this webpage (the one you are currently
reading) and use <code>wget</code> to test all the links on the page. Are there any broken
links?</li>
<li>Tell <code>wget</code> to use a different user agent string in a request to your server running
on localhost. Check what the request looks like to your server.</li>
<li>How would <code>wget -r -l 1 http://example.com</code> differ from <code>wget -p http://example.com</code>? <em>(Hint: think about external resources)</em>.</li>
<li>Look for 'Recursive Accept/Reject options' in the <code>wget</code> manpage. How would
you get <code>wget</code> to crawl pages from multiple different domains?</li>
<li>Look up what <code>-nc</code> does. What is clobbering, and why would or wouldn't you
want to do it?</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="beautifulsoup"><a class="header" href="#beautifulsoup">BeautifulSoup</a></h1>
<p>Previously in this unit we have taught you how to construct webpages, including how
to construct webpages so that they present structured information (e.g., the
contents of a database). The presumption has generally been that you are
designing webpages for (usually visual) consumption by a human using a standard
web browser, or at most writing Javascript functions that will help a human use
a webpage in particular way.</p>
<p>However, there are situations where you may need to write code that interacts
with webpages in an automated fashion -- perhaps to extract some data from webpages
that isn't available in a more machine-friendly format. This <em>scraping</em> of
webpages is a valuable (if sometimes maliciously applied) skill that can be
useful to many kinds of software engineers and data scientists. This exercise
talks you through some applications of one of the most common frameworks, a
Python library called BeautifulSoup.</p>
<h2 id="setup-1"><a class="header" href="#setup-1">Setup</a></h2>
<p>First, you want to install the BeautifulSoup library, which you can achieve with
<code>sudo apt install python3-bs4</code>. Python does have its own package manager, <code>pip</code>,
but it would get in the way of our system-wide package management to use it here.</p>
<p>You can test that Python is working by just typing <code>python3</code> at the command line
-- it should launch the interactive interpreter, which will prompt you for
Python code with <code>&gt;&gt;&gt;</code>. Type <code>from bs4 import BeautifulSoup</code>. If this completes
then you've successfully imported the library.</p>
<h2 id="interacting-with-soup"><a class="header" href="#interacting-with-soup">Interacting with Soup</a></h2>
<p>Next, enter something like the following:</p>
<pre><code class="language-python">file = "cattax/index.html"
soup = BeautifulSoup(open(file, 'r'))
</code></pre>
<p><em>(You may need to change the 'file' line to reflect where the <code>cattax/index.html</code>
file really is relative to where you launched <code>python3</code>. Also, if you close the
interpreter at any point remember you'll need to re-run the <code>import</code> line above
to get the library).</em></p>
<p>You now have a 'soup' object, which is a Python object that has various methods
for interacting with HTML (and XML) documents and accessing their contents. To
start with, just type <code>soup</code> in your interpreter. Python will print out the
basic textual representation of the object, which is just the source of the
<code>index.html</code> page. Next, let's attempt one of the commonest use-cases for scraping.</p>
<pre><code class="language-python">soup.get_text()
</code></pre>
<p>You should see a string containing the textual content of the webpage. If you
call <code>print</code> on the result, you should see that the text has been laid out in a
fair approximation of how the visible text would appear on a webpage.</p>
<pre><code class="language-python">text = soup.get_text()
print(text)
</code></pre>
<p>Getting the visible text out of a page is a common requirement if, e.g., you
were going to use the webpage as input to an NLP system. You can also access
non-visible portions of the page -- <code>soup.title</code> will give you the title element
of the webpage, and <code>soup.title.text</code> will get you the textual content within
the title element. Note the difference: <code>soup.title</code> is a BeautifulSoup element
(of type <code>Tag</code>), and has methods associated with being a tag; <code>soup.title.text</code>
is just a string, and only has methods that apply to strings.</p>
<p>As HTML documents are structured, you can interact with them in a structured
manner. <code>soup.head</code> will get you a soup object reflecting the 'head' part of
the HTML structure, and <code>soup.head.findChildren()</code> will return a list containing
all of the 'children' elements inside the head. By knowing the structure of the
document you can thus navigate to certain elements programmatically. This
doesn't just relate to the tags, either: you can also access the value of
attributes. <code>soup.head.meta['charset']</code> would access the <code>charset</code> attribute of
the meta tag in the head of the document.</p>
<h3 id="exercises-10"><a class="header" href="#exercises-10">Exercises</a></h3>
<ol>
<li>Take a look at some other examples from <a href="https://beautiful-soup-4.readthedocs.io/en/latest/#navigating-the-tree">the BeautifulSoup documentation</a>, in particular regarding the use of the <code>.find_all()</code> method.</li>
<li>Use your interpreter to access a list of all the <code>&lt;strong&gt;</code> elements in the
webpage, and figure out how to print out just the text contained within them.</li>
<li>How would you use <code>.find_all()</code> to find all <code>&lt;div&gt;</code> elements with a
particular class value (e.g., 'container')? Would your method work if the div
had multiple classes?</li>
</ol>
<h2 id="a-scraping-script"><a class="header" href="#a-scraping-script">A Scraping Script</a></h2>
<p>Download <a href="scrape/../resources/scrape.py">this python script</a> to the directory that
contains your <code>cattax</code> folder (<em>not</em> into <code>cattax</code> itself). On the command line,
you should be able to run this script with <code>python3 scrape.py</code>. You'll see that
it prints out a series of lines related to all the files in <code>cattax</code>.</p>
<p>Open <code>scrape.py</code> in an editor and inspect what it is doing. The script imports
two libraries, one is BeautifulSoup and the other is <code>os</code>, which allows the
script to use certain operating system functions. <code>os.listdir</code> is then used to list the
contents of our <code>cattax</code> directory and iterate over them. We filter the
filenames by checking to see which of them end with the string 'html', and if
they do then we open the file and parse it into a BeautifulSoup object. Then, we
print out text from certain elements, separated by a ':'. Understand how this
works, asking a TA or lecturer for help if you aren't sure.</p>
<h3 id="exercises-11"><a class="header" href="#exercises-11">Exercises</a></h3>
<ol>
<li>Modify <code>scrape.py</code> so that it <em>also</em> prints out the contents of the 'info'
paragraph in each page (this can be a second print statement). Run the script
again to test that it works.</li>
<li>Currently the script prints something for <em>every</em> page. Modify it so it would
only print something out for the leaf nodes -- those pages that don't have a
'container' element of their own.</li>
<li>Printing things out can be useful, but often we want to store values we
scrape for later programmatic work. Rather than printing out information,
create and update a <a href="https://realpython.com/python-dicts/">Python dict</a> for all
leaf nodes where the dictionary keys are the titles of a page and the values are
the corresponding content of the 'info' box. <em>Run your script with <code>python3 -i scrape.py</code> and it will execute your script and then place you in an interactive
session immediately following your script's execution. You can then check that
the dictionary's contents are what you expect by interacting with the dict
object in your interpreter.</em></li>
</ol>
<h2 id="when-to-scrape"><a class="header" href="#when-to-scrape">When to scrape</a></h2>
<p>As we discuss in this week's lectures, scraping webpages can come with some
risks, depending upon how you go about it and what you do with the results.
Guidelines you should follow include:</p>
<ul>
<li>Always respect the <a href="https://developers.google.com/search/docs/crawling-indexing/robots/robots_txt">robots.txt</a> presented by a site. Resources denied to crawlers may be protected for a legal or ethical reason.</li>
<li>Always look for an API first. If a site will provide you with a JSON endpoint
to query for the structured data you want, it is both easier and more polite
to use that API instead of scraping the same data from webpages designed for
human consumption.</li>
<li>Be very careful about any scraping behind an authenticated log-in, such as
from a logged-in social media account. Think about the privacy expectations
people have about the content you are collecting, both in legal and ethical
terms. If you post publicly something that was intended only for a limited
audience, you could be betraying a confidence, and might even face legal
repercussions.</li>
<li>Generally beware that being able to access and read information from the web
does not mean you are permitted to republish it, even in a modified form.</li>
</ul>
<h2 id="further-reading"><a class="header" href="#further-reading">Further reading</a></h2>
<p>You may have noticed that we downloaded our webpages with <code>wget</code> in the previous
exercise, and then dealt with their content using Python in this one. If you
were writing a Python tool that was meant to do something specific with the
content of a webpage, then you would often want to avoid using a second tool,
and make web requests directly from your program.
The Python library that is most often recommended for requesting web resources
is the <a href="https://docs.python-requests.org/en/latest/">Requests library</a>, and
getting familiar with it would be useful both if you wanted to access web pages
programmatically and if you need to interact with a website's API.</p>
<p>We've also been dealing with the content of <em>static</em> websites, without the dynamic
content like that you learned about in the Javascript exercises. Scraping
dynamic sites gets trickier, as your scraper needs to have a browser-like
context to execute Javascript within, and often might need to pretend to
interact with the page. Systems like <a href="https://www.selenium.dev/documentation/">Selenium</a>
are designed for cases like this.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
